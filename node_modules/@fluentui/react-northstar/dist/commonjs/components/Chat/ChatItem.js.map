{"version":3,"file":"ChatItem.js","names":["_reactBindings","require","customPropTypes","_interopRequireWildcard","PropTypes","React","_utils","_Box","_chatContext","_chatItemContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","chatItemClassName","exports","chatItemSlotClassNames","message","gutter","ChatItem","forwardRef","inputProps","ref","context","useFluentContext","_useTelemetry","useTelemetry","displayName","telemetry","setStart","setEnd","chatProps","useChatContextSelectors","density","v","accessibility","behaviors","item","props","assign","attached","children","className","contentPosition","design","styles","variables","_props$unstable_layou","unstable_layout","layout","getA11Props","useAccessibility","debugName","rtl","_useStyles","useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","renderContent","gutterElement","Box","create","defaultProps","messageElement","createElement","ChatItemContextProvider","value","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","element","root","rtlTextContainer","getAttributes","forElements","childrenExist","as","propTypes","commonPropTypes","createCommon","content","oneOfType","bool","oneOf","itemShorthand","keys","createShorthandFactory","Component","mappedProp"],"sources":["components/Chat/ChatItem.tsx"],"sourcesContent":["import { Accessibility } from '@fluentui/accessibility';\nimport {\n  ForwardRefWithAs,\n  getElementType,\n  useAccessibility,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { FluentComponentStaticProps, ShorthandValue } from '../../types';\nimport {\n  ChildrenComponentProps,\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  rtlTextContainer,\n  UIComponentProps,\n} from '../../utils';\nimport { Box, BoxProps } from '../Box/Box';\nimport { useChatContextSelectors } from './chatContext';\nimport { ChatDensity } from './chatDensity';\nimport { ChatItemContextProvider } from './chatItemContext';\nimport type { ChatMessageLayout } from './ChatMessage';\n\nexport interface ChatItemSlotClassNames {\n  message: string;\n  gutter: string;\n}\n\nexport const chatItemClassName = 'ui-chat__item';\nexport const chatItemSlotClassNames: ChatItemSlotClassNames = {\n  message: `${chatItemClassName}__message`,\n  gutter: `${chatItemClassName}__gutter`,\n};\n\nexport interface ChatItemProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<never>;\n\n  /** Controls item's relation to other chat items. */\n  attached?: boolean | 'top' | 'bottom';\n\n  /** Indicates whether the content is positioned at the start or the end. */\n  contentPosition?: 'start' | 'end';\n\n  /** Chat density. Is automatically set by the Chat. */\n  density?: ChatDensity;\n\n  /** Chat items can have a gutter. */\n  gutter?: ShorthandValue<BoxProps>;\n\n  /** Chat items can have a message. */\n  message?: ShorthandValue<BoxProps>;\n\n  /** Chat items can render with different layouts. */\n  unstable_layout?: ChatMessageLayout;\n}\n\nexport type ChatItemStylesProps = Pick<ChatItemProps, 'attached' | 'contentPosition' | 'density'> & {\n  layout: ChatMessageLayout;\n};\n\n/**\n * A ChatItem is container for single entity in Chat (e.g. message, notification, etc).\n */\nexport const ChatItem = React.forwardRef<HTMLLIElement, ChatItemProps>((inputProps, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(ChatItem.displayName, context.telemetry);\n  setStart();\n\n  const chatProps = useChatContextSelectors({\n    density: v => v.density,\n    accessibility: v => v.behaviors.item,\n  });\n  const props = {\n    ...chatProps,\n    ...inputProps,\n  };\n\n  const {\n    accessibility,\n    attached,\n    children,\n    className,\n    contentPosition,\n    density,\n    design,\n    gutter,\n    message,\n    styles,\n    variables,\n    unstable_layout: layout = 'default',\n  } = props;\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: ChatItem.displayName,\n    rtl: context.rtl,\n  });\n  const { classes, styles: resolvedStyles } = useStyles<ChatItemStylesProps>(ChatItem.displayName, {\n    className: chatItemClassName,\n    mapPropsToStyles: () => ({\n      layout,\n      attached,\n      contentPosition,\n      density,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const renderContent = () => {\n    const gutterElement = Box.create(gutter, {\n      defaultProps: () =>\n        getA11Props('gutter', {\n          className: chatItemSlotClassNames.gutter,\n          styles: resolvedStyles.gutter,\n        }),\n    });\n    const messageElement = Box.create(message, {\n      defaultProps: () =>\n        getA11Props('message', {\n          className: chatItemSlotClassNames.message,\n          styles: resolvedStyles.message,\n        }),\n    });\n\n    return (\n      <ChatItemContextProvider value={{ attached }}>\n        {(contentPosition === 'start' || density === 'compact') && gutterElement}\n        {messageElement}\n        {contentPosition === 'end' && density === 'comfy' && gutterElement}\n      </ChatItemContextProvider>\n    );\n  };\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(ChatItem.handledProps, props);\n\n  const element = (\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      {childrenExist(children) ? children : renderContent()}\n    </ElementType>\n  );\n  setEnd();\n\n  return element;\n}) as unknown as ForwardRefWithAs<'li', HTMLLIElement, ChatItemProps> & FluentComponentStaticProps<ChatItemProps>;\n\nChatItem.displayName = 'ChatItem';\n\nChatItem.defaultProps = {\n  as: 'li',\n  contentPosition: 'start',\n  attached: false,\n};\nChatItem.propTypes = {\n  ...commonPropTypes.createCommon({ content: false }),\n  attached: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf<'top' | 'bottom'>(['top', 'bottom'])]),\n  contentPosition: PropTypes.oneOf(['start', 'end']),\n  density: PropTypes.oneOf<ChatDensity>(['comfy', 'compact']),\n  gutter: customPropTypes.itemShorthand,\n  message: customPropTypes.itemShorthand,\n  unstable_layout: PropTypes.oneOf(['default', 'refresh']),\n};\nChatItem.handledProps = Object.keys(ChatItem.propTypes) as any;\n\nChatItem.create = createShorthandFactory({ Component: ChatItem, mappedProp: 'message' });\n"],"mappings":"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"}