{"version":3,"file":"Chat.js","names":["_accessibility","require","_reactBindings","customPropTypes","_interopRequireWildcard","PropTypes","React","_utils","_chatContext","_chatDensity","_ChatItem","_ChatMessage","_ChatMessageDetails","_ChatMessageHeader","_ChatMessageReadStatus","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","chatClassName","exports","chatSlotClassNames","item","Chat","forwardRef","props","ref","context","useFluentContext","_useTelemetry","useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","children","className","density","design","items","styles","variables","getA11Props","useAccessibility","debugName","rtl","_useStyles","useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","childBehaviors","contextProps","behaviors","message","element","unstable_wrapWithFocusZone","createElement","assign","root","rtlTextContainer","getAttributes","forElements","ChatContextProvider","value","childrenExist","_map2","ChatItem","create","defaultProps","chatBehavior","as","defaultChatDensity","propTypes","commonPropTypes","createCommon","content","arrayOf","itemShorthand","oneOf","keys","Item","Message","ChatMessage","MessageHeader","ChatMessageHeader","MessageDetails","ChatMessageDetails","MessageReadStatus","ChatMessageReadStatus","createShorthandFactory","Component"],"sources":["components/Chat/Chat.tsx"],"sourcesContent":["import { Accessibility, chatBehavior, ChatBehaviorProps } from '@fluentui/accessibility';\nimport {\n  ForwardRefWithAs,\n  getElementType,\n  useAccessibility,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { FluentComponentStaticProps, ShorthandCollection } from '../../types';\nimport {\n  ChildrenComponentProps,\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  rtlTextContainer,\n  UIComponentProps,\n} from '../../utils';\nimport { ChatContextProvider, ChatContextValue } from './chatContext';\nimport { ChatDensity, defaultChatDensity } from './chatDensity';\nimport { ChatItem, ChatItemProps } from './ChatItem';\nimport { ChatMessage } from './ChatMessage';\nimport { ChatMessageDetails } from './ChatMessageDetails';\nimport { ChatMessageHeader } from './ChatMessageHeader';\nimport { ChatMessageReadStatus } from './ChatMessageReadStatus';\n\nexport interface ChatSlotClassNames {\n  item: string;\n}\n\nexport interface ChatProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ChatBehaviorProps>;\n\n  /** Chat density. */\n  density?: ChatDensity;\n\n  /** Shorthand array of the items inside the chat. */\n  items?: ShorthandCollection<ChatItemProps>;\n}\n\nexport type ChatStylesProps = Pick<ChatProps, 'density'>;\nexport const chatClassName = 'ui-chat';\nexport const chatSlotClassNames: ChatSlotClassNames = {\n  item: `${chatClassName}__item`,\n};\n\n/**\n * A Chat displays messages from a conversation between multiple users.\n */\nexport const Chat = React.forwardRef<HTMLUListElement, ChatProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Chat.displayName, context.telemetry);\n  setStart();\n\n  const { accessibility, children, className, density, design, items, styles, variables } = props;\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: Chat.displayName,\n    rtl: context.rtl,\n  });\n  const { classes } = useStyles<ChatStylesProps>(Chat.displayName, {\n    className: chatClassName,\n    mapPropsToStyles: () => ({ density }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Chat.handledProps, props);\n\n  const childBehaviors = accessibility && (accessibility as Accessibility<ChatProps>)(props).childBehaviors;\n\n  const contextProps: ChatContextValue = {\n    density,\n    behaviors: {\n      item: childBehaviors?.item,\n      message: childBehaviors?.message,\n    },\n  };\n\n  const element = getA11Props.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      <ChatContextProvider value={contextProps}>\n        {childrenExist(children)\n          ? children\n          : _.map(items, item =>\n              ChatItem.create(item, {\n                defaultProps: () => ({ className: chatSlotClassNames.item }),\n              }),\n            )}\n      </ChatContextProvider>\n    </ElementType>,\n  );\n  setEnd();\n\n  return element;\n}) as unknown as ForwardRefWithAs<'ul', HTMLUListElement, ChatProps> &\n  FluentComponentStaticProps<ChatProps> & {\n    Item: typeof ChatItem;\n    Message: typeof ChatMessage;\n    MessageDetails: typeof ChatMessageDetails;\n    MessageReadStatus: typeof ChatMessageReadStatus;\n    MessageHeader: typeof ChatMessageHeader;\n  };\n\nChat.displayName = 'Chat';\n\nChat.defaultProps = {\n  accessibility: chatBehavior,\n  as: 'ul',\n  density: defaultChatDensity,\n};\nChat.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  items: PropTypes.arrayOf(customPropTypes.itemShorthand),\n  density: PropTypes.oneOf<ChatDensity>(['comfy', 'compact']),\n};\nChat.handledProps = Object.keys(Chat.propTypes) as any;\n\nChat.Item = ChatItem;\nChat.Message = ChatMessage;\nChat.MessageHeader = ChatMessageHeader;\nChat.MessageDetails = ChatMessageDetails;\nChat.MessageReadStatus = ChatMessageReadStatus;\n\nChat.create = createShorthandFactory({ Component: Chat });\n"],"mappings":"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"}