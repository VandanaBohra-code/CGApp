{"version":3,"file":"Loader.js","names":["_accessibility","require","customPropTypes","_interopRequireWildcard","_reactBindings","PropTypes","React","_utils","_Box","_Text","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","loaderClassName","exports","loaderSlotClassNames","indicator","label","Loader","forwardRef","props","ref","context","useFluentContext","_useTelemetry","useTelemetry","displayName","telemetry","setStart","setEnd","delay","secondary","inline","labelPosition","className","design","styles","variables","size","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","delayTimer","useRef","_React$useState","useState","visible","setVisible","labelId","current","getOrGenerateIdFromShorthand","_useStyles","useStyles","mapPropsToStyles","mapPropsToInlineStyles","rtl","classes","resolvedStyles","getA11yProps","useAccessibility","accessibility","debugName","mapPropsToBehavior","useEffect","setTimeout","clearTimeout","svgElement","createElement","viewBox","xmlns","svg","svgTrack","svgTail","element","assign","root","Box","create","defaultProps","children","Text","id","propTypes","commonPropTypes","createCommon","content","number","itemShorthand","bool","oneOf","loaderBehavior","keys","createShorthandFactory","Component","mappedProp","shorthandConfig"],"sources":["components/Loader/Loader.tsx"],"sourcesContent":["import { Accessibility, loaderBehavior, LoaderBehaviorProps } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport {\n  ShorthandConfig,\n  useTelemetry,\n  useFluentContext,\n  getElementType,\n  useUnhandledProps,\n  useStyles,\n  useAccessibility,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  createShorthandFactory,\n  UIComponentProps,\n  commonPropTypes,\n  SizeValue,\n  getOrGenerateIdFromShorthand,\n} from '../../utils';\nimport { ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Box, BoxProps } from '../Box/Box';\nimport { Text, TextProps } from '../Text/Text';\n\nexport interface LoaderSlotClassNames {\n  indicator: string;\n  label: string;\n}\n\nexport interface LoaderProps extends UIComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<LoaderBehaviorProps>;\n\n  /** Time in milliseconds after component mount before spinner is visible. */\n  delay?: number;\n\n  /** A loader can contain an indicator. */\n  indicator?: ShorthandValue<BoxProps>;\n\n  /** Loaders can appear inline with content. */\n  inline?: boolean;\n\n  /** A loader can contain a label. */\n  label?: ShorthandValue<TextProps>;\n\n  /** A label in the loader can have different positions. */\n  labelPosition?: 'above' | 'below' | 'start' | 'end';\n\n  /** A size of the loader. */\n  size?: SizeValue;\n\n  /** A loader can contain a custom svg element. */\n  svg?: ShorthandValue<BoxProps>;\n\n  /** A loader can be secondary */\n  secondary?: boolean;\n}\n\nexport interface LoaderState {\n  visible: boolean;\n  labelId: string;\n}\n\nexport const loaderClassName = 'ui-loader';\nexport const loaderSlotClassNames: LoaderSlotClassNames = {\n  indicator: `${loaderClassName}__indicator`,\n  label: `${loaderClassName}__label`,\n};\n\nexport type LoaderStylesProps = Pick<LoaderProps, 'inline' | 'labelPosition' | 'size' | 'secondary'>;\n\n/**\n * A loader alerts a user that content is being loaded or processed and they should wait for the activity to complete.\n *\n * @accessibility\n * Implements [ARIA progressbar](https://www.w3.org/TR/wai-aria-1.1/#progressbar) role.\n */\nexport const Loader = React.forwardRef<HTMLDivElement, LoaderProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Loader.displayName, context.telemetry);\n  setStart();\n  const { delay, secondary, label, indicator, inline, labelPosition, className, design, styles, variables, size } =\n    props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Loader.handledProps, props);\n\n  const delayTimer = React.useRef<number>();\n  const [visible, setVisible] = React.useState(props.delay === 0);\n\n  const labelId = React.useRef<string>();\n  labelId.current = getOrGenerateIdFromShorthand('loader-label-', label, labelId.current);\n\n  const { classes, styles: resolvedStyles } = useStyles<LoaderStylesProps>(Loader.displayName, {\n    className: loaderClassName,\n    mapPropsToStyles: () => ({\n      inline,\n      labelPosition,\n      size,\n      secondary,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const getA11yProps = useAccessibility<LoaderBehaviorProps>(props.accessibility, {\n    debugName: Loader.displayName,\n    mapPropsToBehavior: () => ({\n      labelId: labelId.current,\n    }),\n    rtl: context.rtl,\n  });\n\n  React.useEffect(() => {\n    if (delay > 0) {\n      // @ts-ignore We have a collision between types from DOM and @types/node\n      delayTimer.current = setTimeout(() => {\n        setVisible(true);\n      }, delay);\n    }\n\n    return () => clearTimeout(delayTimer.current);\n  }, [delay]);\n\n  const svgElement = (\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" className={classes.svg}>\n      <circle className={classes.svgTrack} />\n      <circle className={classes.svgTail} />\n    </svg>\n  );\n\n  const element = visible && (\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {Box.create(indicator, {\n        defaultProps: () =>\n          getA11yProps('indicator', {\n            children: svgElement,\n            className: loaderSlotClassNames.indicator,\n            styles: resolvedStyles.indicator,\n          }),\n      })}\n      {Text.create(label, {\n        defaultProps: () =>\n          getA11yProps('label', {\n            className: loaderSlotClassNames.label,\n            styles: resolvedStyles.label,\n            id: labelId.current,\n          }),\n      })}\n    </ElementType>\n  );\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, LoaderProps> &\n  FluentComponentStaticProps<LoaderProps> & {\n    shorthandConfig: ShorthandConfig<LoaderProps>;\n  };\n\nLoader.displayName = 'Loader';\n\nLoader.propTypes = {\n  ...commonPropTypes.createCommon({\n    children: false,\n    content: false,\n  }),\n  delay: PropTypes.number,\n  indicator: customPropTypes.itemShorthand,\n  inline: PropTypes.bool,\n  label: customPropTypes.itemShorthand,\n  labelPosition: PropTypes.oneOf(['above', 'below', 'start', 'end']),\n  size: customPropTypes.size,\n  svg: customPropTypes.itemShorthand,\n  secondary: PropTypes.bool,\n};\n\nLoader.defaultProps = {\n  accessibility: loaderBehavior,\n  delay: 0,\n  indicator: {},\n  labelPosition: 'below',\n  svg: '',\n  size: 'medium',\n};\n\nLoader.handledProps = Object.keys(Loader.propTypes) as any;\n\nLoader.create = createShorthandFactory({ Component: Loader, mappedProp: 'label' });\n\nLoader.shorthandConfig = { mappedProp: 'label' };\n"],"mappings":"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"}