{"version":3,"file":"ToolbarRadioGroup.js","names":["_accessibility","require","_reactBindings","_reactComponentRef","customPropTypes","_interopRequireWildcard","PropTypes","React","_utils","_ToolbarDivider","_ToolbarItem","_toolbarVariablesContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","toolbarRadioGroupClassName","exports","ToolbarRadioGroup","compose","props","ref","composeOptions","context","useFluentContext","_useTelemetry","useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","activeIndex","children","className","design","items","variables","styles","itemRefs","slotProps","resolveSlotProps","parentVariables","useContext","ToolbarVariablesContext","mergedVariables","mergeVariablesOverrides","getA11yProps","useAccessibility","debugName","actionHandlers","nextItem","event","setFocusedItem","prevItem","rtl","_useStyles","useStyles","mapPropsToInlineStyles","unstable_props","classes","direction","filteredRadioItems","_filter2","item","index","currentItem","disabled","currentFocusedIndex","_findIndex2","current","tabIndex","itemsLength","length","nextIndex","nextItemToFocus","focus","target","activeElement","stopPropagation","preventDefault","renderItems","_map2","kind","_get2","createRef","createShorthand","slots","divider","defaultProps","toolbarItem","assign","active","createElement","Ref","innerRef","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","element","root","ToolbarVariablesProvider","value","childrenExist","ToolbarItem","ToolbarDivider","toolbarRadioGroupItemBehavior","shorthandConfig","mappedProp","propTypes","commonPropTypes","createCommon","number","collectionShorthandWithKindProp","toolbarRadioGroupBehavior"],"sources":["components/Toolbar/ToolbarRadioGroup.tsx"],"sourcesContent":["import {\n  Accessibility,\n  toolbarRadioGroupBehavior,\n  toolbarRadioGroupItemBehavior,\n  ToolbarRadioGroupBehaviorProps,\n} from '@fluentui/accessibility';\nimport {\n  compose,\n  getElementType,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useAccessibility,\n  useStyles,\n  useFluentContext,\n  useTelemetry,\n} from '@fluentui/react-bindings';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport {\n  ChildrenComponentProps,\n  ContentComponentProps,\n  createShorthand,\n  UIComponentProps,\n  childrenExist,\n  commonPropTypes,\n} from '../../utils';\nimport { ShorthandCollection } from '../../types';\nimport { ToolbarDivider, ToolbarDividerProps } from './ToolbarDivider';\nimport { ToolbarItem, ToolbarItemProps } from './ToolbarItem';\nimport { ToolbarVariablesContext, ToolbarVariablesProvider } from './toolbarVariablesContext';\n\nexport type ToolbarRadioGroupItemShorthandKinds = {\n  divider: ToolbarDividerProps;\n  item: ToolbarItemProps;\n};\n\nexport interface ToolbarRadioGroupProps extends UIComponentProps, ChildrenComponentProps, ContentComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility<ToolbarRadioGroupBehaviorProps>;\n\n  /** Index of the currently active item. */\n  activeIndex?: number;\n\n  /** Shorthand array of props for ToolbarRadioGroup. */\n  items?: ShorthandCollection<ToolbarItemProps, ToolbarRadioGroupItemShorthandKinds>;\n}\n\nexport type ToolbarRadioGroupStylesProps = never;\nexport const toolbarRadioGroupClassName = 'ui-toolbars'; // FIXME: required by getComponentInfo/isConformant. But this is group inside a toolbar not a group of toolbars\n\n/**\n * A ToolbarRadioGroup renders Toolbar item as a group of mutually exclusive options.\n * Component doesn't implement mutual exclusiveness, it just serves accessibility purposes.\n *\n * @accessibility\n * Implements [ARIA RadioGroup](https://www.w3.org/TR/wai-aria-practices/#radiobutton) design pattern.\n */\nexport const ToolbarRadioGroup = compose<'div', ToolbarRadioGroupProps, ToolbarRadioGroupStylesProps, {}, {}>(\n  (props, ref, composeOptions) => {\n    const context = useFluentContext();\n    const { setStart, setEnd } = useTelemetry(composeOptions.displayName, context.telemetry);\n    setStart();\n\n    const { accessibility, activeIndex, children, className, design, items, variables, styles } = props;\n    const itemRefs: React.RefObject<HTMLElement>[] = [];\n\n    const slotProps = composeOptions.resolveSlotProps(props);\n    const parentVariables = React.useContext(ToolbarVariablesContext);\n    const mergedVariables = mergeVariablesOverrides(parentVariables, variables);\n\n    const getA11yProps = useAccessibility(accessibility, {\n      debugName: composeOptions.displayName,\n      actionHandlers: {\n        nextItem: event => setFocusedItem(event, 1),\n        prevItem: event => setFocusedItem(event, -1),\n      },\n      rtl: context.rtl,\n    });\n    const { classes } = useStyles<ToolbarRadioGroupStylesProps>(composeOptions.displayName, {\n      className: composeOptions.className,\n      composeOptions,\n      mapPropsToInlineStyles: () => ({ className, design, styles, variables: mergedVariables }),\n      rtl: context.rtl,\n      unstable_props: props,\n    });\n\n    const setFocusedItem = (event: React.KeyboardEvent, direction) => {\n      // filter items which are not disabled\n      const filteredRadioItems: React.RefObject<HTMLElement>[] = _.filter(itemRefs, (item, index) => {\n        const currentItem = items[index] as ToolbarItemProps;\n        return currentItem && !currentItem.disabled;\n      });\n\n      // get the index of currently focused element (w/ tabindex = 0) or the first one as default\n      const currentFocusedIndex =\n        _.findIndex(filteredRadioItems, (item: React.RefObject<HTMLElement>) => {\n          return item.current.tabIndex === 0;\n        }) || 0;\n\n      const itemsLength = filteredRadioItems.length;\n      let nextIndex = currentFocusedIndex + direction;\n\n      if (nextIndex >= itemsLength) {\n        nextIndex = 0;\n      }\n\n      if (nextIndex < 0) {\n        nextIndex = itemsLength - 1;\n      }\n\n      const nextItemToFocus = filteredRadioItems[nextIndex].current;\n      if (nextItemToFocus) {\n        nextItemToFocus.focus();\n      }\n\n      if (context.target.activeElement === nextItemToFocus) {\n        event.stopPropagation();\n      }\n      event.preventDefault();\n    };\n\n    const renderItems = () => {\n      return _.map(items, (item, index) => {\n        const kind = _.get(item, 'kind', 'item');\n\n        const ref = React.createRef<HTMLElement>();\n        itemRefs[index] = ref;\n\n        if (kind === 'divider') {\n          return createShorthand(composeOptions.slots.divider, item, {\n            defaultProps: () => slotProps.divider,\n          });\n        }\n\n        const toolbarItem = createShorthand(composeOptions.slots.item, item, {\n          defaultProps: () => ({\n            ...slotProps.item,\n            active: activeIndex === index,\n          }),\n        });\n\n        return (\n          <Ref innerRef={ref} key={toolbarItem.key}>\n            {toolbarItem}\n          </Ref>\n        );\n      });\n    };\n\n    const ElementType = getElementType(props);\n    const unhandledProps = useUnhandledProps(composeOptions.handledProps, props);\n\n    const element = (\n      <ElementType\n        {...getA11yProps('root', {\n          ...unhandledProps,\n          className: classes.root,\n          ref,\n        })}\n      >\n        <ToolbarVariablesProvider value={mergedVariables}>\n          {childrenExist(children) ? children : renderItems()}\n        </ToolbarVariablesProvider>\n      </ElementType>\n    );\n    setEnd();\n\n    return element;\n  },\n  {\n    className: toolbarRadioGroupClassName,\n    displayName: 'ToolbarRadioGroup',\n\n    slots: {\n      item: ToolbarItem,\n      divider: ToolbarDivider,\n    },\n    slotProps: () => ({\n      item: {\n        accessibility: toolbarRadioGroupItemBehavior,\n      },\n    }),\n\n    shorthandConfig: { mappedProp: 'content' },\n    handledProps: [\n      'accessibility',\n      'as',\n      'children',\n      'className',\n      'content',\n      'design',\n      'styles',\n      'variables',\n\n      'activeIndex',\n      'items',\n    ],\n  },\n);\n\nToolbarRadioGroup.propTypes = {\n  ...commonPropTypes.createCommon(),\n  activeIndex: PropTypes.number,\n  items: customPropTypes.collectionShorthandWithKindProp(['divider', 'item']),\n};\nToolbarRadioGroup.defaultProps = {\n  accessibility: toolbarRadioGroupBehavior,\n};\n"],"mappings":"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"}