{"version":3,"file":"DebugSelector.js","names":["PropTypes","_interopRequireWildcard","require","React","_reactComponentEventListener","_utils","_FiberNavigator","_DebugRect","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","INITIAL_STATE","fiberNav","DebugSelector","_React$Component","_inheritsLoose2","_this","_len","arguments","length","args","Array","_key","apply","concat","state","debugDOMNode","domNode","FiberNavigator","fromDOMNode","console","error","props","filter","setCurrentFiberNav","setState","prevState","_prevState$fiberNav","__fiber","onHover","handleMouseMove","e","target","handleMouseLeave","handleDOMNodeClick","preventDefault","stopPropagation","onSelect","_proto","render","_this$props","active","mountDocument","renderLabel","showBackground","showClassName","showCropMarks","showElement","createElement","Fragment","EventListener","listener","body","type","DebugRect","Component","exports","defaultProps","isBrowser","window","document","propTypes","object","isRequired"],"sources":["components/Debug/DebugSelector.tsx"],"sourcesContent":["import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { EventListener } from '@fluentui/react-component-event-listener';\n\nimport { isBrowser } from '../../utils';\n\nimport { FiberNavigator } from './FiberNavigator';\nimport { DebugRect } from './DebugRect';\n\nexport type DebugSelectorProps = {\n  /** Existing document the popup should add listeners. */\n  mountDocument?: Document;\n  onSelect?: (fiberNav: FiberNavigator) => void;\n  onHover?: (fiberNav: FiberNavigator) => void;\n  renderLabel?: (fiberNav: FiberNavigator) => string;\n  showBackground?: boolean;\n  showClassName?: boolean;\n  showCropMarks?: boolean;\n  showElement?: boolean;\n  filter?: (fiberNav: FiberNavigator) => FiberNavigator | null;\n  active?: boolean;\n};\n\nexport type DebugSelectorState = {\n  fiberNav: FiberNavigator;\n};\n\nconst INITIAL_STATE: DebugSelectorState = {\n  fiberNav: null,\n};\n\n// TODO: This is a copy and trim-down of Debug.tsx\n//       Cleanup and use in Debug.tsx before merge:\n//         - Make hotkey invocation generic, or take prop for active state\n//           since Debug uses ctrl + 'd' and DebugSelector uses ctrl + 'c' in react-builder\n//\nexport class DebugSelector extends React.Component<DebugSelectorProps, DebugSelectorState> {\n  state = INITIAL_STATE;\n\n  static defaultProps = {\n    active: false,\n    filter: fiberNav => fiberNav,\n    // eslint-disable-next-line no-undef\n    mountDocument: isBrowser() ? window.document : null,\n  };\n\n  static propTypes = {\n    mountDocument: PropTypes.object.isRequired,\n  };\n\n  debugDOMNode = domNode => {\n    let fiberNav = FiberNavigator.fromDOMNode(domNode);\n\n    if (!fiberNav) {\n      // eslint-disable-next-line no-console\n      console.error('No fiber for dom node', domNode);\n      return;\n    }\n\n    fiberNav = this.props.filter(fiberNav);\n\n    this.setCurrentFiberNav(fiberNav);\n  };\n\n  setCurrentFiberNav = (fiberNav: FiberNavigator | null) => {\n    this.setState(prevState => {\n      if (fiberNav?.__fiber !== prevState.fiberNav?.__fiber) {\n        this.props.onHover?.(fiberNav);\n        return { fiberNav };\n      }\n      return null;\n    });\n  };\n\n  handleMouseMove = e => {\n    this.debugDOMNode(e.target);\n  };\n\n  handleMouseLeave = e => {\n    this.setCurrentFiberNav(null);\n  };\n\n  handleDOMNodeClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.props.onSelect?.(this.state.fiberNav);\n  };\n\n  render() {\n    const { active, mountDocument, renderLabel, showBackground, showClassName, showCropMarks, showElement } =\n      this.props;\n    const { fiberNav } = this.state;\n\n    return (\n      <>\n        {active && <EventListener listener={this.handleMouseMove} target={mountDocument.body} type=\"mousemove\" />}\n        {active && <EventListener listener={this.handleMouseLeave} target={mountDocument.body} type=\"mouseleave\" />}\n        {active && fiberNav && fiberNav.domNode && (\n          <EventListener listener={this.handleDOMNodeClick} target={fiberNav.domNode} type=\"click\" />\n        )}\n        {active && fiberNav && (\n          <DebugRect\n            showBackground={showBackground}\n            showClassName={showClassName}\n            showElement={showElement}\n            showCropMarks={showCropMarks}\n            fiberNav={fiberNav}\n            renderLabel={renderLabel}\n          />\n        )}\n      </>\n    );\n  }\n}\n"],"mappings":"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"}