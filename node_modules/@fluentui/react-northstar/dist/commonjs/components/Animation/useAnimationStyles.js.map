{"version":3,"file":"useAnimationStyles.js","names":["_reactBindings","require","animationCache","WeakMap","animationClassName","exports","useAnimationStyles","displayName","props","_useFluentContext","useFluentContext","theme","rtl","disableAnimations","renderer","performance","className","animationDuration","animationDelay","animation","name","keyframeParams","duration","delay","iterationCount","direction","fillMode","playState","timingFunction","cacheEnabled","enableStylesCaching","cachePerTheme","cacheKey","has","set","get","JSON","stringify","_getStyles","getStyles","allDisplayNames","primaryDisplayName","componentProps","inlineStylesProps","styles","createAnimationStyles","enableSanitizeCssPlugin","enableVariablesCaching","enableBooleanVariablesCaching","saveDebug","_noop2","default","telemetry","undefined","classes","result","root"],"sources":["components/Animation/useAnimationStyles.ts"],"sourcesContent":["import {\n  ComponentAnimationProp,\n  unstable_getStyles as getStyles,\n  unstable_createAnimationStyles as createAnimationStyles,\n  useFluentContext,\n} from '@fluentui/react-bindings';\nimport { ThemePrepared } from '@fluentui/styles';\n\nimport * as _ from 'lodash';\nimport { AnimationProps } from './Animation';\n\ntype UseAnimationStylesResult = {\n  className: string;\n  animationDuration?: string;\n  animationDelay?: string;\n};\n\nconst animationCache = new WeakMap<ThemePrepared, Record<string, UseAnimationStylesResult>>();\nexport const animationClassName = 'ui-animation';\n\nexport const useAnimationStyles = (displayName: string, props: AnimationProps): UseAnimationStylesResult => {\n  const { theme, rtl, disableAnimations, renderer, performance } = useFluentContext();\n\n  if (disableAnimations) {\n    return {\n      className: animationClassName,\n      animationDuration: '0ms',\n      animationDelay: '0ms',\n    };\n  }\n\n  const animation: ComponentAnimationProp = {\n    name: props.name,\n    keyframeParams: props.keyframeParams,\n    duration: props.duration,\n    delay: props.delay,\n    iterationCount: props.iterationCount,\n    direction: props.direction,\n    fillMode: props.fillMode,\n    playState: props.playState,\n    timingFunction: props.timingFunction,\n  };\n\n  const cacheEnabled = performance.enableStylesCaching;\n\n  let cachePerTheme = {};\n  let cacheKey = '';\n\n  if (cacheEnabled) {\n    if (!animationCache.has(theme)) {\n      animationCache.set(theme, {});\n    }\n\n    cachePerTheme = animationCache.get(theme);\n    cacheKey = JSON.stringify(animation);\n\n    if (cachePerTheme[cacheKey]) {\n      return cachePerTheme[cacheKey];\n    }\n  }\n\n  const { classes, styles } = getStyles({\n    allDisplayNames: [displayName],\n    className: animationClassName,\n    primaryDisplayName: displayName,\n    componentProps: {},\n    inlineStylesProps: {\n      styles: createAnimationStyles(animation, theme),\n    },\n\n    disableAnimations,\n    renderer,\n    rtl,\n    performance: {\n      enableSanitizeCssPlugin: false,\n      enableStylesCaching: false,\n      enableVariablesCaching: false,\n      enableBooleanVariablesCaching: false,\n    },\n    saveDebug: _.noop,\n    theme,\n    telemetry: undefined,\n  });\n\n  const result: UseAnimationStylesResult = {\n    className: classes.root,\n    animationDuration: styles.root.animationDuration as string,\n    animationDelay: styles.root.animationDelay as string,\n  };\n\n  if (cacheEnabled) {\n    cachePerTheme[cacheKey] = result;\n    animationCache.set(theme, cachePerTheme);\n  }\n\n  return result;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,cAAA,GAAAC,OAAA;AAiBA,IAAMC,cAAc,GAAG,IAAIC,OAAO,CAA0D,CAAC;AACtF,IAAMC,kBAAkB,GAAG,cAAc;AAACC,OAAA,CAAAD,kBAAA,GAAAA,kBAAA;AAE1C,IAAME,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,WAAmB,EAAEC,KAAqB,EAA+B;EAC1G,IAAAC,iBAAA,GAAiE,IAAAC,+BAAgB,EAAC,CAAC;IAA3EC,KAAK,GAAAF,iBAAA,CAALE,KAAK;IAAEC,GAAG,GAAAH,iBAAA,CAAHG,GAAG;IAAEC,iBAAiB,GAAAJ,iBAAA,CAAjBI,iBAAiB;IAAEC,QAAQ,GAAAL,iBAAA,CAARK,QAAQ;IAAEC,WAAW,GAAAN,iBAAA,CAAXM,WAAW;EAE5D,IAAIF,iBAAiB,EAAE;IACrB,OAAO;MACLG,SAAS,EAAEZ,kBAAkB;MAC7Ba,iBAAiB,EAAE,KAAK;MACxBC,cAAc,EAAE;IAClB,CAAC;EACH;EAEA,IAAMC,SAAiC,GAAG;IACxCC,IAAI,EAAEZ,KAAK,CAACY,IAAI;IAChBC,cAAc,EAAEb,KAAK,CAACa,cAAc;IACpCC,QAAQ,EAAEd,KAAK,CAACc,QAAQ;IACxBC,KAAK,EAAEf,KAAK,CAACe,KAAK;IAClBC,cAAc,EAAEhB,KAAK,CAACgB,cAAc;IACpCC,SAAS,EAAEjB,KAAK,CAACiB,SAAS;IAC1BC,QAAQ,EAAElB,KAAK,CAACkB,QAAQ;IACxBC,SAAS,EAAEnB,KAAK,CAACmB,SAAS;IAC1BC,cAAc,EAAEpB,KAAK,CAACoB;EACxB,CAAC;EAED,IAAMC,YAAY,GAAGd,WAAW,CAACe,mBAAmB;EAEpD,IAAIC,aAAa,GAAG,CAAC,CAAC;EACtB,IAAIC,QAAQ,GAAG,EAAE;EAEjB,IAAIH,YAAY,EAAE;IAChB,IAAI,CAAC3B,cAAc,CAAC+B,GAAG,CAACtB,KAAK,CAAC,EAAE;MAC9BT,cAAc,CAACgC,GAAG,CAACvB,KAAK,EAAE,CAAC,CAAC,CAAC;IAC/B;IAEAoB,aAAa,GAAG7B,cAAc,CAACiC,GAAG,CAACxB,KAAK,CAAC;IACzCqB,QAAQ,GAAGI,IAAI,CAACC,SAAS,CAAClB,SAAS,CAAC;IAEpC,IAAIY,aAAa,CAACC,QAAQ,CAAC,EAAE;MAC3B,OAAOD,aAAa,CAACC,QAAQ,CAAC;IAChC;EACF;EAEA,IAAAM,UAAA,GAA4B,IAAAC,iCAAS,EAAC;MACpCC,eAAe,EAAE,CAACjC,WAAW,CAAC;MAC9BS,SAAS,EAAEZ,kBAAkB;MAC7BqC,kBAAkB,EAAElC,WAAW;MAC/BmC,cAAc,EAAE,CAAC,CAAC;MAClBC,iBAAiB,EAAE;QACjBC,MAAM,EAAE,IAAAC,6CAAqB,EAAC1B,SAAS,EAAER,KAAK;MAChD,CAAC;MAEDE,iBAAiB,EAAjBA,iBAAiB;MACjBC,QAAQ,EAARA,QAAQ;MACRF,GAAG,EAAHA,GAAG;MACHG,WAAW,EAAE;QACX+B,uBAAuB,EAAE,KAAK;QAC9BhB,mBAAmB,EAAE,KAAK;QAC1BiB,sBAAsB,EAAE,KAAK;QAC7BC,6BAA6B,EAAE;MACjC,CAAC;MACDC,SAAS,EAAAC,MAAA,CAAAC,OAAQ;MACjBxC,KAAK,EAALA,KAAK;MACLyC,SAAS,EAAEC;IACb,CAAC,CAAC;IArBMC,OAAO,GAAAhB,UAAA,CAAPgB,OAAO;IAAEV,MAAM,GAAAN,UAAA,CAANM,MAAM;EAuBvB,IAAMW,MAAgC,GAAG;IACvCvC,SAAS,EAAEsC,OAAO,CAACE,IAAI;IACvBvC,iBAAiB,EAAE2B,MAAM,CAACY,IAAI,CAACvC,iBAA2B;IAC1DC,cAAc,EAAE0B,MAAM,CAACY,IAAI,CAACtC;EAC9B,CAAC;EAED,IAAIW,YAAY,EAAE;IAChBE,aAAa,CAACC,QAAQ,CAAC,GAAGuB,MAAM;IAChCrD,cAAc,CAACgC,GAAG,CAACvB,KAAK,EAAEoB,aAAa,CAAC;EAC1C;EAEA,OAAOwB,MAAM;AACf,CAAC;AAAClD,OAAA,CAAAC,kBAAA,GAAAA,kBAAA"}