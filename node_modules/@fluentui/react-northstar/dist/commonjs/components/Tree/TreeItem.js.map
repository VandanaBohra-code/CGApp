{"version":3,"file":"TreeItem.js","names":["_accessibility","require","_reactBindings","customPropTypes","_interopRequireWildcard","PropTypes","React","_reactComponentRef","_utils","_TreeTitle","_context","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","treeItemClassName","exports","TreeItem","forwardRef","props","ref","context","useFluentContext","_useTelemetry","useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","children","className","contentRef","design","title","renderItemTitle","expanded","level","index","styles","variables","treeSize","selectionIndicator","selectable","id","parent","_React$useContext","useContext","TreeContext","getItemById","registerItemRef","toggleItemActive","focusItemById","expandSiblings","toggleItemSelect","getToFocusIDByFirstCharacter","_getItemById","selected","hasSubtree","childrenIds","getA11Props","useAccessibility","actionHandlers","performClick","e","shouldPreventDefaultOnKeyDown","preventDefault","stopPropagation","_invoke2","focusParent","handleFocusParent","collapse","expand","focusFirstChild","handleFocusFirstChild","handleSiblingsExpand","performSelection","handleSelection","debugName","mapPropsToBehavior","indeterminate","rtl","_useStyles","useStyles","mapPropsToStyles","mapPropsToInlineStyles","unstyled","classes","handleTitleOverrides","predefinedProps","onClick","titleProps","handleClick","target","currentTarget","handleKeyDown","length","match","altKey","ctrlKey","metaKey","toFocusID","elementRef","useCallback","node","handleRef","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","element","createElement","assign","root","onKeyDown","rtlTextContainer","getAttributes","forElements","childrenExist","TreeTitle","create","defaultProps","as","render","overrideProps","propTypes","commonPropTypes","createCommon","content","string","isRequired","number","items","collectionShorthand","onFocusFirstChild","func","onFocusParent","onTitleClick","onSiblingsExpand","bool","itemShorthand","shorthandAllowingChildren","treeItemBehavior","keys","createShorthandFactory","Component","mappedProp"],"sources":["components/Tree/TreeItem.tsx"],"sourcesContent":["import { Accessibility, treeItemBehavior, TreeItemBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useUnhandledProps,\n  useAccessibility,\n  useStyles,\n  useTelemetry,\n  useFluentContext,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { handleRef } from '@fluentui/react-component-ref';\nimport {\n  childrenExist,\n  createShorthandFactory,\n  commonPropTypes,\n  UIComponentProps,\n  ChildrenComponentProps,\n  rtlTextContainer,\n  shouldPreventDefaultOnKeyDown,\n} from '../../utils';\nimport {\n  ComponentEventHandler,\n  ShorthandRenderFunction,\n  ShorthandValue,\n  ShorthandCollection,\n  FluentComponentStaticProps,\n  ComponentKeyboardEventHandler,\n} from '../../types';\nimport { TreeTitle, TreeTitleProps } from './TreeTitle';\nimport { BoxProps } from '../Box/Box';\nimport { TreeContext } from './context';\n\nexport interface TreeItemProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<TreeItemBehaviorProps>;\n\n  /** Ref for the item DOM element. */\n  contentRef?: React.Ref<HTMLElement>;\n\n  /** Id needed to identify this item inside the Tree. */\n  id: string;\n\n  /** The index of the item among its siblings. Count starts at 1. */\n  index?: number;\n\n  /** Array of props for sub tree. */\n  items?: ShorthandCollection<TreeItemProps>;\n\n  /** Level of the tree/subtree that contains this item. */\n  level?: number;\n\n  /** Called when the item's first child is about to be focused. */\n  onFocusFirstChild?: ComponentEventHandler<TreeItemProps>;\n\n  /** Called when the item's parent is about to be focused. */\n  onFocusParent?: ComponentEventHandler<TreeItemProps>;\n\n  /** Called when a tree title is clicked. */\n  onTitleClick?: ComponentEventHandler<TreeItemProps>;\n\n  /**\n   * Called on click.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClick?: ComponentEventHandler<TreeItemProps>;\n\n  /** Called when the item's siblings are about to be expanded. */\n  onSiblingsExpand?: ComponentEventHandler<TreeItemProps>;\n\n  /** Whether or not the item is in the expanded state. Only makes sense if item has children items. If set to true, item is initialy expanded. */\n  expanded?: boolean;\n\n  /** The id of the parent tree item, if any. */\n  parent?: string;\n\n  /**\n   * A custom render iterator for rendering each tree title.\n   * The default component, props, and children are available for each tree title.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderItemTitle?: ShorthandRenderFunction<TreeTitleProps>;\n\n  /** Size of the tree/subtree that contains this item. */\n  treeSize?: number;\n\n  /** Properties for TreeTitle. */\n  title?: ShorthandValue<TreeTitleProps>;\n\n  /** Whether or not the item can be selectable. */\n  selectable?: boolean;\n\n  /** A selection indicator icon can be customized. */\n  selectionIndicator?: ShorthandValue<BoxProps>;\n\n  /**\n   * Called on item key down.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onKeyDown?: ComponentKeyboardEventHandler<TreeItemProps>;\n\n  unstyled?: boolean;\n}\n\nexport type TreeItemStylesProps = Required<Pick<TreeItemProps, 'level'>> & {\n  selectable?: boolean;\n};\nexport const treeItemClassName = 'ui-tree__item';\n\n/**\n * A TreeItem renders an item of a Tree.\n *\n * @accessibility\n * Implements [ARIA TreeView](https://www.w3.org/TR/wai-aria-practices-1.1/#TreeView) design pattern.\n */\nexport const TreeItem = React.forwardRef<HTMLDivElement, TreeItemProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(TreeItem.displayName, context.telemetry);\n  setStart();\n\n  const {\n    accessibility,\n    children,\n    className,\n    contentRef,\n    design,\n    title,\n    renderItemTitle,\n    expanded,\n    level,\n    index,\n    styles,\n    variables,\n    treeSize,\n    selectionIndicator,\n    selectable,\n    id,\n    parent,\n  } = props;\n\n  const {\n    getItemById,\n    registerItemRef,\n    toggleItemActive,\n    focusItemById,\n    expandSiblings,\n    toggleItemSelect,\n    getToFocusIDByFirstCharacter,\n  } = React.useContext(TreeContext);\n\n  const { selected, hasSubtree, childrenIds } = getItemById(id);\n\n  const getA11Props = useAccessibility(accessibility, {\n    actionHandlers: {\n      performClick: e => {\n        if (shouldPreventDefaultOnKeyDown(e)) {\n          e.preventDefault();\n        }\n        e.stopPropagation();\n        toggleItemActive(e, id);\n        _.invoke(props, 'onTitleClick', e, props);\n      },\n      focusParent: e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        handleFocusParent(e);\n      },\n      collapse: e => {\n        e.preventDefault();\n        e.stopPropagation();\n        toggleItemActive(e, id);\n      },\n      expand: e => {\n        e.preventDefault();\n        e.stopPropagation();\n        toggleItemActive(e, id);\n      },\n      focusFirstChild: e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        handleFocusFirstChild(e);\n      },\n      expandSiblings: e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        handleSiblingsExpand(e);\n      },\n      performSelection: e => {\n        e.preventDefault();\n        e.stopPropagation();\n        handleSelection(e);\n      },\n    },\n    debugName: TreeItem.displayName,\n    mapPropsToBehavior: () => ({\n      expanded,\n      level,\n      index,\n      hasSubtree,\n      treeSize,\n      selected: selected === true,\n      selectable,\n      indeterminate: selected === 'indeterminate',\n    }),\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<TreeItemStylesProps>(TreeItem.displayName, {\n    className: treeItemClassName,\n    mapPropsToStyles: () => ({\n      level,\n      selectable,\n    }),\n    mapPropsToInlineStyles: () => ({ className, design, styles, variables }),\n    rtl: context.rtl,\n    unstyled: props.unstyled,\n  });\n\n  const handleSelection = e => {\n    if (selectable) {\n      toggleItemSelect(e, id);\n    }\n    _.invoke(props, 'onTitleClick', e, props);\n  };\n\n  const handleFocusFirstChild = e => {\n    _.invoke(props, 'onFocusFirstChild', e, props);\n    focusItemById(childrenIds?.[0]);\n  };\n\n  const handleFocusParent = e => {\n    _.invoke(props, 'onFocusParent', e, props);\n    focusItemById(parent);\n  };\n\n  const handleSiblingsExpand = e => {\n    _.invoke(props, 'onSiblingsExpand', e, props);\n    expandSiblings(e, props.id);\n  };\n\n  const handleTitleOverrides = (predefinedProps: TreeTitleProps) => ({\n    id,\n    onClick: (e, titleProps) => {\n      _.invoke(props, 'onTitleClick', e, props);\n      _.invoke(predefinedProps, 'onClick', e, titleProps);\n    },\n  });\n\n  const handleClick = (e: React.SyntheticEvent) => {\n    if (e.target === e.currentTarget) {\n      // onClick listener for mouse click on treeItem DOM only,\n      // which could be triggered by VO+space on selectable tree parent node\n      handleSelection(e);\n    }\n\n    _.invoke(props, 'onClick', e, props);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key && e.key.length === 1 && e.key.match(/\\S/) && e.key !== '*' && !e.altKey && !e.ctrlKey && !e.metaKey) {\n      e.preventDefault();\n      e.stopPropagation();\n      const toFocusID = getToFocusIDByFirstCharacter(e, props.id);\n      if (toFocusID !== props.id) {\n        focusItemById(toFocusID);\n      }\n    }\n    _.invoke(props, 'onKeyDown', e, props);\n  };\n\n  const elementRef = React.useCallback(\n    node => {\n      registerItemRef(id, node);\n      handleRef(contentRef, node);\n      handleRef(ref, node);\n    },\n    [id, contentRef, registerItemRef, ref],\n  );\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(TreeItem.handledProps, props);\n  const element = (\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        id,\n        ref: elementRef,\n        selected: selected === true,\n        onClick: handleClick,\n        onKeyDown: handleKeyDown,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      {childrenExist(children)\n        ? children\n        : TreeTitle.create(title, {\n            defaultProps: () =>\n              getA11Props('title', {\n                hasSubtree,\n                as: hasSubtree ? 'span' : 'a',\n                level,\n                treeSize,\n                expanded,\n                index,\n                selected: selected === true,\n                selectable,\n                parent,\n                ...(hasSubtree && {\n                  indeterminate: selected === 'indeterminate',\n                }),\n                selectionIndicator,\n              }),\n            render: renderItemTitle,\n            overrideProps: handleTitleOverrides,\n          })}\n    </ElementType>\n  );\n\n  setEnd();\n\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, TreeItemProps> & FluentComponentStaticProps<TreeItemProps>;\n\nTreeItem.displayName = 'TreeItem';\n\nTreeItem.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  contentRef: customPropTypes.ref,\n  id: PropTypes.string.isRequired,\n  index: PropTypes.number,\n  items: customPropTypes.collectionShorthand,\n  level: PropTypes.number,\n  onFocusFirstChild: PropTypes.func,\n  onFocusParent: PropTypes.func,\n  onTitleClick: PropTypes.func,\n  onSiblingsExpand: PropTypes.func,\n  expanded: PropTypes.bool,\n  parent: PropTypes.string,\n  renderItemTitle: PropTypes.func,\n  treeSize: PropTypes.number,\n  title: customPropTypes.itemShorthand,\n  selectionIndicator: customPropTypes.shorthandAllowingChildren,\n  selectable: PropTypes.bool,\n  unstyled: PropTypes.bool,\n  onKeyDown: PropTypes.func,\n};\n\nTreeItem.defaultProps = {\n  accessibility: treeItemBehavior,\n  selectable: true,\n};\n\nTreeItem.handledProps = Object.keys(TreeItem.propTypes) as any;\n\nTreeItem.create = createShorthandFactory({\n  Component: TreeItem,\n  mappedProp: 'title',\n});\n"],"mappings":"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"}