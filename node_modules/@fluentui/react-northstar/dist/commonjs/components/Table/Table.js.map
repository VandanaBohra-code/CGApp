{"version":3,"file":"Table.js","names":["_accessibility","require","_reactBindings","customPropTypes","_interopRequireWildcard","PropTypes","React","_utils","_TableRow","_TableCell","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","tableClassName","exports","tableSlotClassNames","header","Table","forwardRef","props","ref","context","useFluentContext","_useTelemetry","useTelemetry","displayName","telemetry","setStart","setEnd","children","rows","compact","accessibility","className","design","styles","variables","hasChildren","childrenExist","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","getA11yProps","useAccessibility","debugName","rtl","_useStyles","useStyles","mapPropsToInlineStyles","classes","renderRows","_map2","row","TableRow","create","defaultProps","onClick","e","_invoke2","overrideProps","predefinedProps","mergeVariablesOverrides","renderHeader","element","unstable_wrapWithFocusZone","createElement","assign","root","Cell","TableCell","Row","createShorthandFactory","Component","propTypes","commonPropTypes","createCommon","content","itemShorthand","collectionShorthand","bool","keys","tableBehavior"],"sources":["components/Table/Table.tsx"],"sourcesContent":["import { Accessibility, tableBehavior, TableBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useTelemetry,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useAccessibility,\n  useStyles,\n  useFluentContext,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport {\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  childrenExist,\n  createShorthandFactory,\n} from '../../utils';\nimport { TableRow, TableRowProps } from './TableRow';\nimport { TableCell } from './TableCell';\n\nimport { ShorthandCollection, ShorthandValue, FluentComponentStaticProps } from '../../types';\n\nexport interface TableSlotClassNames {\n  header: string;\n}\n\nexport interface TableProps extends UIComponentProps, ChildrenComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * */\n  accessibility?: Accessibility<TableBehaviorProps>;\n\n  /** The columns of the Table with a space-separated list of values.\n   */\n  header?: ShorthandValue<TableRowProps>;\n\n  /** The rows of the Table with a space-separated list of values.\n   */\n  rows?: ShorthandCollection<TableRowProps>;\n\n  /**\n   * Render table in compact mode\n   */\n  compact?: boolean;\n}\n\nexport const tableClassName = 'ui-table';\nexport const tableSlotClassNames: TableSlotClassNames = {\n  header: `${tableClassName}__header`,\n};\n\nexport type TableStylesProps = never;\n\n/**\n * A Table is used to display data in tabular layout\n * * @accessibility\n * Implements ARIA [Data Grid](https://www.w3.org/TR/wai-aria-practices/#dataGrid) design pattern for presenting tabular information.\n * When gridcell contains actionable element, use [gridCellWithFocusableElementBehavior](/components/table/accessibility#grid-cell-with-focusable-element-behavior-ts). [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_focus)\n * Use [gridCellMultipleFocusableBehavior](/components/table/accessibility#gridCellMultipleFocusableBehavior), when gridcell contains:\n * \\- editable content\n * \\- multiple actionable elements\n * \\- component that utilizes arrow keys in its navigation, like menu button, dropdown, radio group, slider, etc.\n * [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_inside)\n * @accessibilityIssues\n * [NVDA narrate table title(aria-label) twice](https://github.com/nvaccess/nvda/issues/10548)\n * [Accessibility DOM > Table > gridcell > when gridcell is focused, then selected state is send to reader](https://bugs.chromium.org/p/chromium/issues/detail?id=1030378)\n * [JAWS narrate grid name twice, once as table and second time as grid](https://github.com/FreedomScientific/VFO-standards-support/issues/346)\n * [JAWS doesn't narrate grid column name, when focus is on actionable element in the cell] (https://github.com/FreedomScientific/VFO-standards-support/issues/348)\n * [aria-sort is not output at child elements](https://github.com/FreedomScientific/VFO-standards-support/issues/319)\n * [VoiceOver not announcing rows correctly for a grid with presentation elements inside](https://bugs.chromium.org/p/chromium/issues/detail?id=1054424)\n * VoiceOver doesn't narrate aria-rowcount value in table or grid\n */\nexport const Table = React.forwardRef<HTMLDivElement, TableProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Table.displayName, context.telemetry);\n  setStart();\n  const { children, rows, header, compact, accessibility, className, design, styles, variables } = props;\n  const hasChildren = childrenExist(children);\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Table.handledProps, props);\n\n  const getA11yProps = useAccessibility<TableBehaviorProps>(accessibility, {\n    debugName: Table.displayName,\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<TableStylesProps>(Table.displayName, {\n    className: tableClassName,\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const renderRows = () => {\n    return _.map(rows, (row: TableRowProps) => {\n      return TableRow.create(row, {\n        defaultProps: () =>\n          getA11yProps('row', {\n            compact,\n            onClick: (e, props) => {\n              _.invoke(row, 'onClick', e, props);\n            },\n          }),\n        overrideProps: predefinedProps => ({\n          variables: mergeVariablesOverrides(variables, predefinedProps.variables),\n        }),\n      });\n    });\n  };\n\n  const renderHeader = () => {\n    return TableRow.create(header, {\n      defaultProps: () =>\n        getA11yProps('row', {\n          header: true,\n          compact,\n          className: tableSlotClassNames.header,\n        }),\n      overrideProps: predefinedProps => ({\n        variables: mergeVariablesOverrides(variables, predefinedProps.variables),\n      }),\n    });\n  };\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {hasChildren && children}\n      {/* <thead> */}\n      {!hasChildren && renderHeader()}\n      {/* </thead> */}\n      {/* <tbody> */}\n      {!hasChildren && renderRows()}\n      {/* </tbody> */}\n    </ElementType>,\n  );\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, TableProps> &\n  FluentComponentStaticProps<TableProps> & {\n    Cell: typeof TableCell;\n    Row: typeof TableRow;\n  };\n\nTable.displayName = 'Table';\n\nTable.Cell = TableCell;\n\nTable.Row = TableRow;\n\nTable.create = createShorthandFactory({\n  Component: Table,\n});\n\nTable.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  header: customPropTypes.itemShorthand,\n  rows: customPropTypes.collectionShorthand,\n  compact: PropTypes.bool,\n};\n\nTable.handledProps = Object.keys(Table.propTypes) as any;\n\nTable.defaultProps = {\n  accessibility: tableBehavior,\n};\n"],"mappings":"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"}