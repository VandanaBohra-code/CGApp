{"version":3,"file":"Popper.js","names":["_reactBindings","require","_reactComponentRef","React","_interopRequireWildcard","_positioningHelper","_usePopper2","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Popper","props","usesRenderProps","children","proposedPlacement","getPlacement","align","position","rtl","latestPlacement","useRef","_React$useState","useState","computedPlacement","setComputedPlacement","popperRef","_usePopper","usePopper","assign","useMergedRefs","onStateUpdate","state","placement","current","targetRef","containerRef","arrowRef","useIsomorphicLayoutEffect","_props$pointerTargetR","isRefObject","pointerTargetRef","scheduleUpdate","useCallback","_popperRef$current","updatePosition","child","createElement","Ref","innerRef","Children","only","exports","defaultProps","enabled","modifiers","positionFixed","positioningDependencies"],"sources":["utils/positioner/Popper.tsx"],"sourcesContent":["import { useIsomorphicLayoutEffect, useMergedRefs } from '@fluentui/react-bindings';\nimport { Ref, isRefObject } from '@fluentui/react-component-ref';\nimport * as PopperJs from '@popperjs/core';\nimport * as React from 'react';\n\nimport { getPlacement } from './positioningHelper';\nimport { PopperChildrenFn, PopperProps, PopperRefHandle } from './types';\nimport { usePopper } from './usePopper';\n\n/**\n * Popper relies on the 3rd party library [Popper.js](https://github.com/FezVrasta/popper.js) for positioning.\n *\n * @deprecated Please use \"usePopper()\" hook instead.\n */\nexport const Popper: React.FunctionComponent<PopperProps> = props => {\n  const usesRenderProps: boolean = typeof props.children === 'function';\n\n  const proposedPlacement = getPlacement(props.align, props.position, props.rtl);\n  const latestPlacement = React.useRef<PopperJs.Placement>(proposedPlacement);\n  const [computedPlacement, setComputedPlacement] = React.useState<PopperJs.Placement>(proposedPlacement);\n\n  const popperRef = React.useRef<PopperRefHandle | null>(null);\n  const { targetRef, containerRef, arrowRef } = usePopper({\n    ...props,\n\n    popperRef: useMergedRefs(props.popperRef, popperRef),\n    onStateUpdate: state => {\n      // PopperJS performs computations that might update the computed placement: auto positioning, flipping the\n      // placement in case the popper box should be rendered at the edge of the viewport and does not fit\n      if (state.placement !== latestPlacement.current) {\n        latestPlacement.current = state.placement;\n\n        // A state change has sense only if renderProps are passed, otherwise a state value is unused\n        if (usesRenderProps) {\n          setComputedPlacement(state.placement);\n        }\n      }\n    },\n  });\n\n  useIsomorphicLayoutEffect(() => {\n    // A way to sync refs, is needed as Popper component accepts refs as params\n    // Does not make anything worse as Popper component does not have proper handing for ref updates ¯\\_(ツ)_/¯\n    targetRef.current = isRefObject(props.targetRef)\n      ? (props.targetRef as React.RefObject<Element>).current\n      : (props.targetRef as PopperJs.VirtualElement);\n    arrowRef.current = props.pointerTargetRef?.current as HTMLElement;\n  });\n\n  const scheduleUpdate = React.useCallback(() => {\n    popperRef.current?.updatePosition();\n  }, []);\n\n  const child = usesRenderProps\n    ? (props.children as PopperChildrenFn)({\n        placement: computedPlacement,\n        scheduleUpdate,\n      })\n    : (props.children as React.ReactElement);\n\n  return child ? <Ref innerRef={containerRef}>{React.Children.only(child)}</Ref> : null;\n};\n\nPopper.defaultProps = {\n  enabled: true,\n  modifiers: [],\n  positionFixed: false,\n  positioningDependencies: [],\n};\n"],"mappings":"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"}