{"version":3,"file":"createComponentInternal.js","names":["_reactBindings","require","React","_interopRequireWildcard","_renderComponent","_factories","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","createComponentInternal","_ref","_ref$displayName","displayName","_ref$className","className","_ref$shorthandPropNam","shorthandPropName","_ref$defaultProps","defaultProps","_ref$handledProps","handledProps","propTypes","actionHandlers","render","mergedDefaultProps","assign","as","FluentComponent","props","ref","useRef","context","useFluentContext","isFirstRenderRef","renderComponent","_keys2","concat","state","config","saveDebug","fluentUIDebug","current","deprecated_className","create","createShorthandFactory","Component","mappedProp","exports"],"sources":["utils/createComponentInternal.ts"],"sourcesContent":["import { AccessibilityActionHandlers, useFluentContext } from '@fluentui/react-bindings';\nimport * as React from 'react';\nimport * as _ from 'lodash';\n\nimport { renderComponent, RenderResultConfig } from './renderComponent';\nimport { createShorthandFactory, ShorthandFactory } from './factories';\nimport { ObjectOf } from '../types';\n\nexport interface CreateComponentConfig<P> {\n  displayName: string;\n  className?: string;\n  shorthandPropName?: string;\n  defaultProps?: Partial<P>;\n  handledProps?: string[];\n  propTypes?: React.WeakValidationMap<P>;\n  actionHandlers?: AccessibilityActionHandlers;\n  render: (config: RenderResultConfig<P>, props: P) => React.ReactNode;\n}\n\nexport type CreateComponentReturnType<P> = React.FunctionComponent<P> & {\n  deprecated_className: string;\n  create: ShorthandFactory<P>;\n};\n\nexport const createComponentInternal = <P extends ObjectOf<any> = any>({\n  displayName = 'FluentUIComponent',\n  className = 'fluent-ui-component',\n  shorthandPropName = 'children',\n  defaultProps = {},\n  handledProps = [],\n  propTypes,\n  actionHandlers,\n  render,\n}: CreateComponentConfig<P>): CreateComponentReturnType<P> => {\n  const mergedDefaultProps = {\n    as: 'div',\n    ...(defaultProps as any),\n  };\n\n  const FluentComponent: CreateComponentReturnType<P> = (props): React.ReactElement<P> => {\n    // Stores debug information for component.\n    // Note that this ref should go as the first one, to be discoverable by debug utils.\n    const ref = React.useRef(null);\n\n    const context = useFluentContext();\n    const isFirstRenderRef = React.useRef<boolean>(true);\n\n    return renderComponent(\n      {\n        className,\n        displayName,\n        handledProps: _.keys(propTypes).concat(handledProps),\n        props,\n        state: {},\n        actionHandlers,\n        render: config => render(config, props),\n        saveDebug: fluentUIDebug => (ref.current = { fluentUIDebug }),\n        isFirstRenderRef,\n      },\n      context,\n    );\n  };\n\n  FluentComponent.deprecated_className = className;\n\n  FluentComponent.create = createShorthandFactory({\n    Component: mergedDefaultProps.as,\n    mappedProp: shorthandPropName,\n  });\n\n  FluentComponent.displayName = displayName;\n\n  FluentComponent.propTypes = propTypes; // TODO: generate prop types\n\n  FluentComponent.defaultProps = mergedDefaultProps;\n\n  return FluentComponent;\n};\n"],"mappings":"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"}