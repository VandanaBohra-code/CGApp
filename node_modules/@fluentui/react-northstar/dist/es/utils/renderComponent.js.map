{"version":3,"file":"renderComponent.js","names":["FocusZone","getElementType","deprecated_getTelemetry","getTelemetry","getUnhandledProps","unstable_getAccessibility","getAccessibility","unstable_getStyles","getStyles","noopRenderer","emptyTheme","logProviderMissingWarning","renderComponent","config","context","className","displayName","handledProps","props","state","actionHandlers","render","_config$saveDebug","saveDebug","_isEmpty","_getTelemetry","telemetry","isFirstRenderRef","setStart","setEnd","rtl","ElementType","unhandledProps","stateAndProps","Object","assign","accessibility","_getStyles","allDisplayNames","disableAnimations","primaryDisplayName","componentProps","inlineStylesProps","renderer","theme","performance","enableStylesCaching","enableBooleanVariablesCaching","classes","variables","styles","resolvedConfig","focusZone","originalElementType","as","isRtl","element"],"sources":["utils/renderComponent.tsx"],"sourcesContent":["import {\n  AccessibilityActionHandlers,\n  ComponentSlotClasses,\n  FocusZone,\n  getElementType,\n  deprecated_getTelemetry as getTelemetry,\n  getUnhandledProps,\n  ReactAccessibilityBehavior,\n  unstable_getAccessibility as getAccessibility,\n  unstable_getStyles as getStyles,\n  ProviderContextPrepared,\n} from '@fluentui/react-bindings';\nimport { noopRenderer } from '@fluentui/react-northstar-styles-renderer';\nimport {\n  emptyTheme,\n  ComponentSlotStylesResolved,\n  ComponentVariablesObject,\n  DebugData,\n  PropsWithVarsAndStyles,\n  ThemePrepared,\n} from '@fluentui/styles';\nimport * as _ from 'lodash';\nimport * as React from 'react';\n\nimport { Props } from '../types';\nimport { logProviderMissingWarning } from './providerMissingHandler';\n\nexport interface RenderResultConfig<P> {\n  ElementType: React.ElementType<P>;\n  classes: ComponentSlotClasses;\n  unhandledProps: Props;\n  variables: ComponentVariablesObject;\n  styles: ComponentSlotStylesResolved;\n  accessibility: ReactAccessibilityBehavior;\n  rtl: boolean;\n  theme: ThemePrepared;\n}\n\nexport type RenderComponentCallback<P> = (config: RenderResultConfig<P>) => any;\n\nexport interface RenderConfig<P> {\n  className?: string;\n  displayName: string;\n  handledProps: string[];\n  props: PropsWithVarsAndStyles;\n  state: Record<string, any>;\n  actionHandlers: AccessibilityActionHandlers;\n  render: RenderComponentCallback<P>;\n  saveDebug: (debug: DebugData | null) => void;\n  isFirstRenderRef: React.MutableRefObject<boolean>;\n}\n\nexport const renderComponent = <P extends {}>(\n  config: RenderConfig<P>,\n  context?: ProviderContextPrepared,\n): React.ReactElement<P> => {\n  const { className, displayName, handledProps, props, state, actionHandlers, render, saveDebug = () => {} } = config;\n\n  if (_.isEmpty(context)) {\n    logProviderMissingWarning();\n  }\n\n  const { setStart, setEnd } = getTelemetry(displayName, context.telemetry, config.isFirstRenderRef);\n  const rtl = context.rtl || false;\n\n  setStart();\n\n  const ElementType = getElementType(props) as React.ReactType<P>;\n  const unhandledProps = getUnhandledProps(handledProps, props);\n  const stateAndProps = { ...state, ...props };\n\n  const accessibility: ReactAccessibilityBehavior = getAccessibility(\n    displayName,\n    props.accessibility,\n    stateAndProps,\n    rtl,\n    actionHandlers,\n  );\n  const { classes, variables, styles, theme } = getStyles({\n    allDisplayNames: [displayName],\n    className,\n    disableAnimations: context.disableAnimations || false,\n    primaryDisplayName: displayName,\n    componentProps: stateAndProps,\n    inlineStylesProps: stateAndProps,\n    renderer: context.renderer || noopRenderer,\n    rtl,\n    saveDebug,\n    theme: context.theme || emptyTheme,\n    performance: {\n      ...context.performance,\n      // we cannot enable caching for class components\n      enableStylesCaching: false,\n      enableBooleanVariablesCaching: false,\n    },\n    telemetry: context.telemetry,\n  });\n\n  const resolvedConfig: RenderResultConfig<P> = {\n    ElementType,\n    unhandledProps,\n    classes,\n    variables,\n    styles,\n    accessibility,\n    rtl,\n    theme,\n  };\n\n  if (accessibility.focusZone) {\n    const originalElementType = resolvedConfig.ElementType;\n\n    resolvedConfig.ElementType = FocusZone as any;\n    resolvedConfig.unhandledProps = {\n      ...resolvedConfig.unhandledProps,\n      ...accessibility.focusZone.props,\n    };\n    resolvedConfig.unhandledProps.as = originalElementType;\n    resolvedConfig.unhandledProps.isRtl = resolvedConfig.rtl;\n  }\n\n  const element = render(resolvedConfig);\n  setEnd();\n\n  return element;\n};\n"],"mappings":"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"}