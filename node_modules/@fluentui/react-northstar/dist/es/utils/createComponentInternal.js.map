{"version":3,"file":"createComponentInternal.js","names":["useFluentContext","React","renderComponent","createShorthandFactory","createComponentInternal","_ref","_ref$displayName","displayName","_ref$className","className","_ref$shorthandPropNam","shorthandPropName","_ref$defaultProps","defaultProps","_ref$handledProps","handledProps","propTypes","actionHandlers","render","mergedDefaultProps","Object","assign","as","FluentComponent","props","ref","useRef","context","isFirstRenderRef","_keys","concat","state","config","saveDebug","fluentUIDebug","current","deprecated_className","create","Component","mappedProp"],"sources":["utils/createComponentInternal.ts"],"sourcesContent":["import { AccessibilityActionHandlers, useFluentContext } from '@fluentui/react-bindings';\nimport * as React from 'react';\nimport * as _ from 'lodash';\n\nimport { renderComponent, RenderResultConfig } from './renderComponent';\nimport { createShorthandFactory, ShorthandFactory } from './factories';\nimport { ObjectOf } from '../types';\n\nexport interface CreateComponentConfig<P> {\n  displayName: string;\n  className?: string;\n  shorthandPropName?: string;\n  defaultProps?: Partial<P>;\n  handledProps?: string[];\n  propTypes?: React.WeakValidationMap<P>;\n  actionHandlers?: AccessibilityActionHandlers;\n  render: (config: RenderResultConfig<P>, props: P) => React.ReactNode;\n}\n\nexport type CreateComponentReturnType<P> = React.FunctionComponent<P> & {\n  deprecated_className: string;\n  create: ShorthandFactory<P>;\n};\n\nexport const createComponentInternal = <P extends ObjectOf<any> = any>({\n  displayName = 'FluentUIComponent',\n  className = 'fluent-ui-component',\n  shorthandPropName = 'children',\n  defaultProps = {},\n  handledProps = [],\n  propTypes,\n  actionHandlers,\n  render,\n}: CreateComponentConfig<P>): CreateComponentReturnType<P> => {\n  const mergedDefaultProps = {\n    as: 'div',\n    ...(defaultProps as any),\n  };\n\n  const FluentComponent: CreateComponentReturnType<P> = (props): React.ReactElement<P> => {\n    // Stores debug information for component.\n    // Note that this ref should go as the first one, to be discoverable by debug utils.\n    const ref = React.useRef(null);\n\n    const context = useFluentContext();\n    const isFirstRenderRef = React.useRef<boolean>(true);\n\n    return renderComponent(\n      {\n        className,\n        displayName,\n        handledProps: _.keys(propTypes).concat(handledProps),\n        props,\n        state: {},\n        actionHandlers,\n        render: config => render(config, props),\n        saveDebug: fluentUIDebug => (ref.current = { fluentUIDebug }),\n        isFirstRenderRef,\n      },\n      context,\n    );\n  };\n\n  FluentComponent.deprecated_className = className;\n\n  FluentComponent.create = createShorthandFactory({\n    Component: mergedDefaultProps.as,\n    mappedProp: shorthandPropName,\n  });\n\n  FluentComponent.displayName = displayName;\n\n  FluentComponent.propTypes = propTypes; // TODO: generate prop types\n\n  FluentComponent.defaultProps = mergedDefaultProps;\n\n  return FluentComponent;\n};\n"],"mappings":";AAAA,SAAsCA,gBAAgB,QAAQ,0BAA0B;AACxF,OAAO,KAAKC,KAAK,MAAM,OAAO;AAG9B,SAASC,eAAe,QAA4B,mBAAmB;AACvE,SAASC,sBAAsB,QAA0B,aAAa;AAmBtE,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAAC,IAAA,EAS0B;EAAA,IAAAC,gBAAA,GAAAD,IAAA,CAR5DE,WAAW;IAAXA,WAAW,GAAAD,gBAAA,cAAG,mBAAmB,GAAAA,gBAAA;IAAAE,cAAA,GAAAH,IAAA,CACjCI,SAAS;IAATA,SAAS,GAAAD,cAAA,cAAG,qBAAqB,GAAAA,cAAA;IAAAE,qBAAA,GAAAL,IAAA,CACjCM,iBAAiB;IAAjBA,iBAAiB,GAAAD,qBAAA,cAAG,UAAU,GAAAA,qBAAA;IAAAE,iBAAA,GAAAP,IAAA,CAC9BQ,YAAY;IAAZA,YAAY,GAAAD,iBAAA,cAAG,CAAC,CAAC,GAAAA,iBAAA;IAAAE,iBAAA,GAAAT,IAAA,CACjBU,YAAY;IAAZA,YAAY,GAAAD,iBAAA,cAAG,EAAE,GAAAA,iBAAA;IACjBE,SAAS,GAAAX,IAAA,CAATW,SAAS;IACTC,cAAc,GAAAZ,IAAA,CAAdY,cAAc;IACdC,OAAM,GAAAb,IAAA,CAANa,MAAM;EAEN,IAAMC,kBAAkB,GAAAC,MAAA,CAAAC,MAAA;IACtBC,EAAE,EAAE;EAAK,GACLT,YAAY,CACjB;EAED,IAAMU,eAA6C,GAAG,SAAhDA,eAA6CA,CAAIC,KAAK,EAA4B;IACtF;IACA;IACA,IAAMC,GAAG,GAAGxB,KAAK,CAACyB,MAAM,CAAC,IAAI,CAAC;IAE9B,IAAMC,OAAO,GAAG3B,gBAAgB,CAAC,CAAC;IAClC,IAAM4B,gBAAgB,GAAG3B,KAAK,CAACyB,MAAM,CAAU,IAAI,CAAC;IAEpD,OAAOxB,eAAe,CACpB;MACEO,SAAS,EAATA,SAAS;MACTF,WAAW,EAAXA,WAAW;MACXQ,YAAY,EAAEc,KAAA,CAAOb,SAAS,CAAC,CAACc,MAAM,CAACf,YAAY,CAAC;MACpDS,KAAK,EAALA,KAAK;MACLO,KAAK,EAAE,CAAC,CAAC;MACTd,cAAc,EAAdA,cAAc;MACdC,MAAM,EAAE,SAAAA,OAAAc,MAAM;QAAA,OAAId,OAAM,CAACc,MAAM,EAAER,KAAK,CAAC;MAAA;MACvCS,SAAS,EAAE,SAAAA,UAAAC,aAAa;QAAA,OAAKT,GAAG,CAACU,OAAO,GAAG;UAAED,aAAa,EAAbA;QAAc,CAAC;MAAA,CAAC;MAC7DN,gBAAgB,EAAhBA;IACF,CAAC,EACDD,OACF,CAAC;EACH,CAAC;EAEDJ,eAAe,CAACa,oBAAoB,GAAG3B,SAAS;EAEhDc,eAAe,CAACc,MAAM,GAAGlC,sBAAsB,CAAC;IAC9CmC,SAAS,EAAEnB,kBAAkB,CAACG,EAAE;IAChCiB,UAAU,EAAE5B;EACd,CAAC,CAAC;EAEFY,eAAe,CAAChB,WAAW,GAAGA,WAAW;EAEzCgB,eAAe,CAACP,SAAS,GAAGA,SAAS,CAAC,CAAC;;EAEvCO,eAAe,CAACV,YAAY,GAAGM,kBAAkB;EAEjD,OAAOI,eAAe;AACxB,CAAC"}