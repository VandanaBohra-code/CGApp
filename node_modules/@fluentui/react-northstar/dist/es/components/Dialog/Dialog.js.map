{"version":3,"file":"Dialog.js","names":["dialogBehavior","getCode","keyboardKey","useAutoControlled","useTelemetry","useAccessibility","useStyles","useFluentContext","useUnhandledProps","getElementType","Unstable_NestingAuto","EventListener","Ref","customPropTypes","PropTypes","React","disableBodyScroll","enableBodyScroll","commonPropTypes","doesNodeContainClick","getOrGenerateIdFromShorthand","createShorthand","createShorthandFactory","Button","ButtonGroup","Box","Header","Portal","Flex","DialogFooter","dialogClassName","dialogSlotClassNames","header","headerAction","content","overlay","footer","Dialog","forwardRef","props","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","actions","cancelButton","closeOnOutsideClick","confirmButton","trapFocus","trigger","backdrop","className","design","styles","variables","ElementType","unhandledProps","handledProps","contentRef","useRef","overlayRef","triggerRef","contentId","current","headerId","getA11yProps","debugName","actionHandlers","closeAndFocusTrigger","e","handleDialogCancel","stopPropagation","_invoke","close","mapPropsToBehavior","rtl","_useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","_useAutoControlled","defaultValue","defaultOpen","value","open","initialValue","setOpen","useEffect","target","Object","assign","handleDialogConfirm","handleDialogOpen","handleCancelButtonOverrides","predefinedProps","onClick","buttonProps","handleConfirmButtonOverrides","isMouseDownInsideContent","registerMouseDownOnDialogContent","button","onMouseDown","handleOverlayClick","isInsideContentClick","isInsideOverlayClick","shouldClose","handleDocumentKeydown","getRefs","lastOverlayRef","pop","isLastOpenedDialog","targetIsBody","nodeName","Escape","cancelElement","overrideProps","confirmElement","defaultProps","primary","dialogActions","create","createElement","gap","hAlign","dialogContent","innerRef","root","as","text","iconOnly","triggerAccessibility","attributes","keyHandlers","keyActions","element","onTriggerClick","nestingRef","Fragment","contentNode","listener","type","capture","propTypes","createCommon","children","itemShorthand","bool","onCancel","func","onConfirm","onOpen","oneOfType","object","any","keys","Footer","Component"],"sources":["components/Dialog/Dialog.tsx"],"sourcesContent":["import { Accessibility, dialogBehavior, DialogBehaviorProps, getCode, keyboardKey } from '@fluentui/accessibility';\nimport {\n  FocusTrapZoneProps,\n  useAutoControlled,\n  useTelemetry,\n  useAccessibility,\n  useStyles,\n  useFluentContext,\n  useUnhandledProps,\n  getElementType,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport { Unstable_NestingAuto } from '@fluentui/react-component-nesting-registry';\nimport { EventListener } from '@fluentui/react-component-event-listener';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\n\nimport {\n  UIComponentProps,\n  commonPropTypes,\n  ContentComponentProps,\n  doesNodeContainClick,\n  getOrGenerateIdFromShorthand,\n  createShorthand,\n  createShorthandFactory,\n} from '../../utils';\nimport { ComponentEventHandler, ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Button, ButtonProps } from '../Button/Button';\nimport { ButtonGroup } from '../Button/ButtonGroup';\nimport { Box, BoxProps } from '../Box/Box';\nimport { Header, HeaderProps } from '../Header/Header';\nimport { Portal, TriggerAccessibility } from '../Portal/Portal';\nimport { Flex } from '../Flex/Flex';\nimport { DialogFooter, DialogFooterProps } from './DialogFooter';\n\nexport interface DialogSlotClassNames {\n  header: string;\n  headerAction: string;\n  content: string;\n  overlay: string;\n  footer: string;\n}\n\nexport interface DialogProps extends UIComponentProps, ContentComponentProps<ShorthandValue<BoxProps>> {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility;\n\n  /** A dialog can contain actions. */\n  actions?: ShorthandValue<BoxProps>;\n\n  /** A dialog can have a backdrop on its overlay. */\n  backdrop?: boolean;\n\n  /** A dialog can contain a cancel button. */\n  cancelButton?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can be closed when a user clicks outside of it. */\n  closeOnOutsideClick?: boolean;\n\n  /** A dialog can contain a confirm button. */\n  confirmButton?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can be open by default. */\n  defaultOpen?: boolean;\n\n  /** A dialog can contain a header. */\n  header?: ShorthandValue<HeaderProps>;\n\n  /** A dialog can contain a button next to the header. */\n  headerAction?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can contain a footer. */\n  footer?: ShorthandValue<DialogFooterProps>;\n\n  /**\n   * Called after a user clicks the cancel button.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onCancel?: ComponentEventHandler<DialogProps>;\n\n  /**\n   * Called after a user clicks the confirm button.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onConfirm?: ComponentEventHandler<DialogProps>;\n\n  /**\n   * Called after a user opens the dialog.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onOpen?: ComponentEventHandler<DialogProps>;\n\n  /** A dialog's open state can be controlled. */\n  open?: boolean;\n\n  /** A dialog can contain a overlay. */\n  overlay?: ShorthandValue<BoxProps>;\n\n  /** Controls whether or not focus trap should be applied, using boolean or FocusTrapZoneProps type value. */\n  trapFocus?: boolean | FocusTrapZoneProps;\n\n  /** Element to be rendered in-place where the dialog is defined. */\n  trigger?: JSX.Element;\n}\n\nexport interface DialogState {\n  contentId?: string;\n  headerId?: string;\n  open?: boolean;\n}\n\nexport const dialogClassName = 'ui-dialog';\nexport const dialogSlotClassNames: DialogSlotClassNames = {\n  header: `${dialogClassName}__header`,\n  headerAction: `${dialogClassName}__headerAction`,\n  content: `${dialogClassName}__content`,\n  overlay: `${dialogClassName}__overlay`,\n  footer: `${dialogClassName}__footer`,\n};\n\nexport type DialogStylesProps = Required<Pick<DialogProps, 'backdrop'>>;\n\n/**\n * A Dialog displays important information on top of a page which requires a user's attention, confirmation, or interaction.\n * Dialogs are purposefully interruptive, so they should be used sparingly.\n *\n * @accessibility\n * Implements [ARIA Dialog (Modal)](https://www.w3.org/TR/wai-aria-practices-1.1/#dialog_modal) design pattern.\n * @accessibilityIssues\n * [NVDA narrates dialog title and button twice](https://github.com/nvaccess/nvda/issues/10003)\n * [NVDA does not recognize the ARIA 1.1 values of aria-haspopup](https://github.com/nvaccess/nvda/issues/8235)\n * [Jaws does not announce token values of aria-haspopup](https://github.com/FreedomScientific/VFO-standards-support/issues/33)\n * [Issue 989517: VoiceOver narrates dialog content and button twice](https://bugs.chromium.org/p/chromium/issues/detail?id=989517)\n */\nexport const Dialog = React.forwardRef<HTMLDivElement, DialogProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Dialog.displayName, context.telemetry);\n  setStart();\n\n  const {\n    accessibility,\n    content,\n    header,\n    actions,\n    cancelButton,\n    closeOnOutsideClick,\n    confirmButton,\n    headerAction,\n    overlay,\n    trapFocus,\n    trigger,\n    footer,\n    backdrop,\n    className,\n    design,\n    styles,\n    variables,\n  } = props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Dialog.handledProps, props);\n\n  const contentRef = React.useRef<HTMLElement>();\n  const overlayRef = React.useRef<HTMLElement>();\n  const triggerRef = React.useRef<HTMLElement>();\n\n  const contentId = React.useRef<string>();\n  contentId.current = getOrGenerateIdFromShorthand('dialog-content-', content, contentId.current);\n  const headerId = React.useRef<string>();\n  headerId.current = getOrGenerateIdFromShorthand('dialog-header-', header, headerId.current);\n\n  const getA11yProps = useAccessibility<DialogBehaviorProps>(accessibility, {\n    debugName: Dialog.displayName,\n    actionHandlers: {\n      closeAndFocusTrigger: e => {\n        handleDialogCancel(e);\n        e.stopPropagation();\n\n        _.invoke(triggerRef, 'current.focus');\n      },\n      close: e => handleDialogCancel(e),\n    },\n    mapPropsToBehavior: () => ({\n      headerId: headerId.current,\n      contentId: contentId.current,\n      trapFocus,\n      trigger,\n    }),\n    rtl: context.rtl,\n  });\n\n  const { classes, styles: resolvedStyles } = useStyles<DialogStylesProps>(Dialog.displayName, {\n    className: dialogClassName,\n    mapPropsToStyles: () => ({\n      backdrop,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const [open, setOpen] = useAutoControlled({\n    defaultValue: props.defaultOpen,\n    value: props.open,\n    initialValue: false,\n  });\n\n  React.useEffect(() => {\n    const target = contentRef?.current;\n    if (open) {\n      disableBodyScroll(target);\n    }\n    return () => {\n      if (open) {\n        enableBodyScroll(target);\n      }\n    };\n  }, [open]);\n\n  const handleDialogCancel = (e: Event | React.SyntheticEvent) => {\n    _.invoke(props, 'onCancel', e, { ...props, open: false });\n    setOpen(false);\n  };\n\n  const handleDialogConfirm = (e: React.SyntheticEvent) => {\n    _.invoke(props, 'onConfirm', e, { ...props, open: false });\n    setOpen(false);\n  };\n\n  const handleDialogOpen = (e: React.SyntheticEvent) => {\n    _.invoke(props, 'onOpen', e, { ...props, open: true });\n    setOpen(true);\n  };\n\n  const handleCancelButtonOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      handleDialogCancel(e);\n    },\n  });\n\n  const handleConfirmButtonOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      handleDialogConfirm(e);\n    },\n  });\n\n  // when press left click on Dialog content and hold, and mouse up on Dialog overlay, Dialog should keep open\n  const isMouseDownInsideContent = React.useRef(false);\n  const registerMouseDownOnDialogContent = (e: React.MouseEvent) => {\n    if (e.button === 0) {\n      isMouseDownInsideContent.current = true;\n    }\n    if (unhandledProps.onMouseDown) {\n      _.invoke(unhandledProps, 'onMouseDown', e);\n    }\n  };\n\n  const handleOverlayClick = (e: MouseEvent) => {\n    // Dialog has different conditions to close than Popup, so we don't need to iterate across all\n    // refs\n    const isInsideContentClick =\n      isMouseDownInsideContent.current || doesNodeContainClick(contentRef.current, e, context.target);\n    isMouseDownInsideContent.current = false;\n\n    const isInsideOverlayClick = doesNodeContainClick(overlayRef.current, e, context.target);\n\n    const shouldClose = !isInsideContentClick && isInsideOverlayClick;\n\n    if (shouldClose) {\n      handleDialogCancel(e);\n    }\n  };\n\n  const handleDocumentKeydown = (getRefs: Function) => (e: KeyboardEvent) => {\n    // if focus was lost from Dialog, for e.g. when click on Dialog's content\n    // and ESC is pressed, the opened Dialog should get closed and the trigger should get focus\n    const lastOverlayRef = getRefs().pop();\n    const isLastOpenedDialog: boolean = lastOverlayRef && lastOverlayRef.current === overlayRef.current;\n    const targetIsBody = (e.target as HTMLElement).nodeName === 'BODY';\n\n    if (targetIsBody && getCode(e) === keyboardKey.Escape && isLastOpenedDialog) {\n      handleDialogCancel(e);\n      _.invoke(triggerRef, 'current.focus');\n    }\n  };\n\n  const cancelElement = createShorthand(Button, cancelButton, {\n    overrideProps: handleCancelButtonOverrides,\n  });\n\n  const confirmElement = createShorthand(Button, confirmButton, {\n    defaultProps: () => ({\n      primary: true,\n    }),\n    overrideProps: handleConfirmButtonOverrides,\n  });\n\n  const dialogActions =\n    (cancelElement || confirmElement) &&\n    ButtonGroup.create(actions, {\n      defaultProps: () => ({\n        styles: resolvedStyles.actions,\n      }),\n      overrideProps: {\n        content: (\n          <Flex gap=\"gap.smaller\" hAlign=\"end\">\n            {cancelElement}\n            {confirmElement}\n          </Flex>\n        ),\n      },\n    });\n\n  const dialogContent = (\n    <Ref innerRef={contentRef}>\n      <ElementType\n        {...getA11yProps('popup', {\n          className: classes.root,\n          ref,\n          ...unhandledProps,\n          onMouseDown: registerMouseDownOnDialogContent,\n        })}\n      >\n        {Header.create(header, {\n          defaultProps: () =>\n            getA11yProps('header', {\n              as: 'h2',\n              className: dialogSlotClassNames.header,\n              styles: resolvedStyles.header,\n            }),\n        })}\n        {createShorthand(Button, headerAction, {\n          defaultProps: () =>\n            getA11yProps('headerAction', {\n              className: dialogSlotClassNames.headerAction,\n              styles: resolvedStyles.headerAction,\n              text: true,\n              iconOnly: true,\n            }),\n        })}\n        {Box.create(content, {\n          defaultProps: () =>\n            getA11yProps('content', {\n              styles: resolvedStyles.content,\n              className: dialogSlotClassNames.content,\n            }),\n        })}\n        {DialogFooter.create(footer, {\n          overrideProps: {\n            content: dialogActions,\n            className: dialogSlotClassNames.footer,\n            styles: resolvedStyles.footer,\n          },\n        })}\n      </ElementType>\n    </Ref>\n  );\n\n  const triggerAccessibility: TriggerAccessibility = {\n    // refactor this when unstable_behaviorDefinition gets merged\n    attributes: accessibility(props).attributes.trigger,\n    keyHandlers: accessibility(props).keyActions.trigger,\n  };\n\n  const element = (\n    <Portal\n      onTriggerClick={handleDialogOpen}\n      open={open}\n      trapFocus={trapFocus}\n      trigger={trigger}\n      triggerAccessibility={triggerAccessibility}\n      triggerRef={triggerRef}\n    >\n      <Unstable_NestingAuto>\n        {(getRefs, nestingRef) => (\n          <>\n            <Ref\n              innerRef={(contentNode: HTMLElement) => {\n                overlayRef.current = contentNode;\n                nestingRef.current = contentNode;\n              }}\n            >\n              {Box.create(overlay, {\n                defaultProps: () => ({\n                  className: dialogSlotClassNames.overlay,\n                  styles: resolvedStyles.overlay,\n                }),\n                overrideProps: { content: dialogContent },\n              })}\n            </Ref>\n\n            {closeOnOutsideClick && (\n              <EventListener listener={handleOverlayClick} target={context.target} type=\"click\" capture />\n            )}\n            <EventListener listener={handleDocumentKeydown(getRefs)} target={context.target} type=\"keydown\" capture />\n          </>\n        )}\n      </Unstable_NestingAuto>\n    </Portal>\n  );\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, DialogProps> &\n  FluentComponentStaticProps<DialogProps> & {\n    Footer: typeof DialogFooter;\n  };\n\nDialog.displayName = 'Dialog';\n\nDialog.propTypes = {\n  ...commonPropTypes.createCommon({\n    children: false,\n    content: 'shorthand',\n  }),\n  actions: customPropTypes.itemShorthand,\n  backdrop: PropTypes.bool,\n  headerAction: customPropTypes.itemShorthand,\n  cancelButton: customPropTypes.itemShorthand,\n  closeOnOutsideClick: PropTypes.bool,\n  confirmButton: customPropTypes.itemShorthand,\n  defaultOpen: PropTypes.bool,\n  header: customPropTypes.itemShorthand,\n  onCancel: PropTypes.func,\n  onConfirm: PropTypes.func,\n  onOpen: PropTypes.func,\n  open: PropTypes.bool,\n  overlay: customPropTypes.itemShorthand,\n  trapFocus: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  trigger: PropTypes.any,\n};\n\nDialog.defaultProps = {\n  accessibility: dialogBehavior,\n  actions: {},\n  backdrop: true,\n  closeOnOutsideClick: true,\n  overlay: {},\n  footer: {},\n  trapFocus: true,\n};\n\nDialog.handledProps = Object.keys(Dialog.propTypes) as any;\n\nDialog.Footer = DialogFooter;\n\nDialog.create = createShorthandFactory({\n  Component: Dialog,\n});\n"],"mappings":"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"}