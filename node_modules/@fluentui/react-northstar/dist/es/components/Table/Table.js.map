{"version":3,"file":"Table.js","names":["tableBehavior","getElementType","useTelemetry","mergeVariablesOverrides","useUnhandledProps","useAccessibility","useStyles","useFluentContext","customPropTypes","PropTypes","React","commonPropTypes","childrenExist","createShorthandFactory","TableRow","TableCell","tableClassName","tableSlotClassNames","header","Table","forwardRef","props","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","children","rows","compact","accessibility","className","design","styles","variables","hasChildren","ElementType","unhandledProps","handledProps","getA11yProps","debugName","rtl","_useStyles","mapPropsToInlineStyles","classes","renderRows","_map","row","create","defaultProps","onClick","e","_invoke","overrideProps","predefinedProps","renderHeader","element","unstable_wrapWithFocusZone","createElement","Object","assign","root","Cell","Row","Component","propTypes","createCommon","content","itemShorthand","collectionShorthand","bool","keys"],"sources":["components/Table/Table.tsx"],"sourcesContent":["import { Accessibility, tableBehavior, TableBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useTelemetry,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useAccessibility,\n  useStyles,\n  useFluentContext,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport {\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  childrenExist,\n  createShorthandFactory,\n} from '../../utils';\nimport { TableRow, TableRowProps } from './TableRow';\nimport { TableCell } from './TableCell';\n\nimport { ShorthandCollection, ShorthandValue, FluentComponentStaticProps } from '../../types';\n\nexport interface TableSlotClassNames {\n  header: string;\n}\n\nexport interface TableProps extends UIComponentProps, ChildrenComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * */\n  accessibility?: Accessibility<TableBehaviorProps>;\n\n  /** The columns of the Table with a space-separated list of values.\n   */\n  header?: ShorthandValue<TableRowProps>;\n\n  /** The rows of the Table with a space-separated list of values.\n   */\n  rows?: ShorthandCollection<TableRowProps>;\n\n  /**\n   * Render table in compact mode\n   */\n  compact?: boolean;\n}\n\nexport const tableClassName = 'ui-table';\nexport const tableSlotClassNames: TableSlotClassNames = {\n  header: `${tableClassName}__header`,\n};\n\nexport type TableStylesProps = never;\n\n/**\n * A Table is used to display data in tabular layout\n * * @accessibility\n * Implements ARIA [Data Grid](https://www.w3.org/TR/wai-aria-practices/#dataGrid) design pattern for presenting tabular information.\n * When gridcell contains actionable element, use [gridCellWithFocusableElementBehavior](/components/table/accessibility#grid-cell-with-focusable-element-behavior-ts). [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_focus)\n * Use [gridCellMultipleFocusableBehavior](/components/table/accessibility#gridCellMultipleFocusableBehavior), when gridcell contains:\n * \\- editable content\n * \\- multiple actionable elements\n * \\- component that utilizes arrow keys in its navigation, like menu button, dropdown, radio group, slider, etc.\n * [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_inside)\n * @accessibilityIssues\n * [NVDA narrate table title(aria-label) twice](https://github.com/nvaccess/nvda/issues/10548)\n * [Accessibility DOM > Table > gridcell > when gridcell is focused, then selected state is send to reader](https://bugs.chromium.org/p/chromium/issues/detail?id=1030378)\n * [JAWS narrate grid name twice, once as table and second time as grid](https://github.com/FreedomScientific/VFO-standards-support/issues/346)\n * [JAWS doesn't narrate grid column name, when focus is on actionable element in the cell] (https://github.com/FreedomScientific/VFO-standards-support/issues/348)\n * [aria-sort is not output at child elements](https://github.com/FreedomScientific/VFO-standards-support/issues/319)\n * [VoiceOver not announcing rows correctly for a grid with presentation elements inside](https://bugs.chromium.org/p/chromium/issues/detail?id=1054424)\n * VoiceOver doesn't narrate aria-rowcount value in table or grid\n */\nexport const Table = React.forwardRef<HTMLDivElement, TableProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Table.displayName, context.telemetry);\n  setStart();\n  const { children, rows, header, compact, accessibility, className, design, styles, variables } = props;\n  const hasChildren = childrenExist(children);\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Table.handledProps, props);\n\n  const getA11yProps = useAccessibility<TableBehaviorProps>(accessibility, {\n    debugName: Table.displayName,\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<TableStylesProps>(Table.displayName, {\n    className: tableClassName,\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const renderRows = () => {\n    return _.map(rows, (row: TableRowProps) => {\n      return TableRow.create(row, {\n        defaultProps: () =>\n          getA11yProps('row', {\n            compact,\n            onClick: (e, props) => {\n              _.invoke(row, 'onClick', e, props);\n            },\n          }),\n        overrideProps: predefinedProps => ({\n          variables: mergeVariablesOverrides(variables, predefinedProps.variables),\n        }),\n      });\n    });\n  };\n\n  const renderHeader = () => {\n    return TableRow.create(header, {\n      defaultProps: () =>\n        getA11yProps('row', {\n          header: true,\n          compact,\n          className: tableSlotClassNames.header,\n        }),\n      overrideProps: predefinedProps => ({\n        variables: mergeVariablesOverrides(variables, predefinedProps.variables),\n      }),\n    });\n  };\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {hasChildren && children}\n      {/* <thead> */}\n      {!hasChildren && renderHeader()}\n      {/* </thead> */}\n      {/* <tbody> */}\n      {!hasChildren && renderRows()}\n      {/* </tbody> */}\n    </ElementType>,\n  );\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, TableProps> &\n  FluentComponentStaticProps<TableProps> & {\n    Cell: typeof TableCell;\n    Row: typeof TableRow;\n  };\n\nTable.displayName = 'Table';\n\nTable.Cell = TableCell;\n\nTable.Row = TableRow;\n\nTable.create = createShorthandFactory({\n  Component: Table,\n});\n\nTable.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  header: customPropTypes.itemShorthand,\n  rows: customPropTypes.collectionShorthand,\n  compact: PropTypes.bool,\n};\n\nTable.handledProps = Object.keys(Table.propTypes) as any;\n\nTable.defaultProps = {\n  accessibility: tableBehavior,\n};\n"],"mappings":"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"}