{"version":3,"file":"DebugSelector.js","names":["PropTypes","React","EventListener","isBrowser","FiberNavigator","DebugRect","INITIAL_STATE","fiberNav","DebugSelector","_React$Component","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","debugDOMNode","domNode","fromDOMNode","console","error","props","filter","setCurrentFiberNav","setState","prevState","_prevState$fiberNav","__fiber","onHover","handleMouseMove","e","target","handleMouseLeave","handleDOMNodeClick","preventDefault","stopPropagation","onSelect","_proto","prototype","render","_this$props","active","mountDocument","renderLabel","showBackground","showClassName","showCropMarks","showElement","createElement","Fragment","listener","body","type","Component","defaultProps","window","document","propTypes","object","isRequired"],"sources":["components/Debug/DebugSelector.tsx"],"sourcesContent":["import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { EventListener } from '@fluentui/react-component-event-listener';\n\nimport { isBrowser } from '../../utils';\n\nimport { FiberNavigator } from './FiberNavigator';\nimport { DebugRect } from './DebugRect';\n\nexport type DebugSelectorProps = {\n  /** Existing document the popup should add listeners. */\n  mountDocument?: Document;\n  onSelect?: (fiberNav: FiberNavigator) => void;\n  onHover?: (fiberNav: FiberNavigator) => void;\n  renderLabel?: (fiberNav: FiberNavigator) => string;\n  showBackground?: boolean;\n  showClassName?: boolean;\n  showCropMarks?: boolean;\n  showElement?: boolean;\n  filter?: (fiberNav: FiberNavigator) => FiberNavigator | null;\n  active?: boolean;\n};\n\nexport type DebugSelectorState = {\n  fiberNav: FiberNavigator;\n};\n\nconst INITIAL_STATE: DebugSelectorState = {\n  fiberNav: null,\n};\n\n// TODO: This is a copy and trim-down of Debug.tsx\n//       Cleanup and use in Debug.tsx before merge:\n//         - Make hotkey invocation generic, or take prop for active state\n//           since Debug uses ctrl + 'd' and DebugSelector uses ctrl + 'c' in react-builder\n//\nexport class DebugSelector extends React.Component<DebugSelectorProps, DebugSelectorState> {\n  state = INITIAL_STATE;\n\n  static defaultProps = {\n    active: false,\n    filter: fiberNav => fiberNav,\n    // eslint-disable-next-line no-undef\n    mountDocument: isBrowser() ? window.document : null,\n  };\n\n  static propTypes = {\n    mountDocument: PropTypes.object.isRequired,\n  };\n\n  debugDOMNode = domNode => {\n    let fiberNav = FiberNavigator.fromDOMNode(domNode);\n\n    if (!fiberNav) {\n      // eslint-disable-next-line no-console\n      console.error('No fiber for dom node', domNode);\n      return;\n    }\n\n    fiberNav = this.props.filter(fiberNav);\n\n    this.setCurrentFiberNav(fiberNav);\n  };\n\n  setCurrentFiberNav = (fiberNav: FiberNavigator | null) => {\n    this.setState(prevState => {\n      if (fiberNav?.__fiber !== prevState.fiberNav?.__fiber) {\n        this.props.onHover?.(fiberNav);\n        return { fiberNav };\n      }\n      return null;\n    });\n  };\n\n  handleMouseMove = e => {\n    this.debugDOMNode(e.target);\n  };\n\n  handleMouseLeave = e => {\n    this.setCurrentFiberNav(null);\n  };\n\n  handleDOMNodeClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.props.onSelect?.(this.state.fiberNav);\n  };\n\n  render() {\n    const { active, mountDocument, renderLabel, showBackground, showClassName, showCropMarks, showElement } =\n      this.props;\n    const { fiberNav } = this.state;\n\n    return (\n      <>\n        {active && <EventListener listener={this.handleMouseMove} target={mountDocument.body} type=\"mousemove\" />}\n        {active && <EventListener listener={this.handleMouseLeave} target={mountDocument.body} type=\"mouseleave\" />}\n        {active && fiberNav && fiberNav.domNode && (\n          <EventListener listener={this.handleDOMNodeClick} target={fiberNav.domNode} type=\"click\" />\n        )}\n        {active && fiberNav && (\n          <DebugRect\n            showBackground={showBackground}\n            showClassName={showClassName}\n            showElement={showElement}\n            showCropMarks={showCropMarks}\n            fiberNav={fiberNav}\n            renderLabel={renderLabel}\n          />\n        )}\n      </>\n    );\n  }\n}\n"],"mappings":"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"}