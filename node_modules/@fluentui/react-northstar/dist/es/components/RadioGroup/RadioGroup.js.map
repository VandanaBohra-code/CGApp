{"version":3,"file":"RadioGroup.js","names":["radioGroupBehavior","customPropTypes","PropTypes","React","childrenExist","commonPropTypes","rtlTextContainer","createShorthandFactory","RadioGroupItem","useAutoControlled","useTelemetry","useFluentContext","getElementType","useUnhandledProps","useAccessibility","useStyles","radioGroupClassName","RadioGroup","forwardRef","props","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","children","vertical","items","className","design","styles","variables","ElementType","unhandledProps","handledProps","getA11yProps","accessibility","debugName","actionHandlers","nextItem","event","setCheckedItem","prevItem","rtl","_useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","_useAutoControlled","defaultValue","defaultCheckedValue","value","checkedValue","initialValue","undefined","setCheckedValue","_React$useState","useState","shouldFocus","setShouldFocus","getItemProps","item","direction","findNextEnabledCheckedItem","checkedValueChange","nextCheckedValue","itemProps","preventDefault","length","currentIndex","_findIndex","newIndex","disabled","handleItemOverrides","predefinedProps","checked","onClick","_invoke","renderItems","isNoneValueSelected","_map","index","create","defaultProps","Object","assign","tabIndex","overrideProps","_ref","element","unstable_wrapWithFocusZone","createElement","root","getAttributes","forElements","propTypes","createCommon","content","oneOfType","number","string","collectionShorthand","onCheckedValueChange","func","bool","keys","Item","Component"],"sources":["components/RadioGroup/RadioGroup.tsx"],"sourcesContent":["// TODO:\n// vertical - padding variable?\nimport { Accessibility, radioGroupBehavior, RadioGroupBehaviorProps } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  childrenExist,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  rtlTextContainer,\n  createShorthandFactory,\n} from '../../utils';\nimport { RadioGroupItem, RadioGroupItemProps } from './RadioGroupItem';\nimport { ComponentEventHandler, ShorthandCollection, FluentComponentStaticProps } from '../../types';\nimport {\n  useAutoControlled,\n  useTelemetry,\n  useFluentContext,\n  getElementType,\n  useUnhandledProps,\n  useAccessibility,\n  useStyles,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\n\nexport interface RadioGroupProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<RadioGroupBehaviorProps>;\n\n  /** Value of the currently checked radio item. */\n  checkedValue?: number | string;\n\n  /**\n   * Called after radio group value is changed.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All value props.\n   */\n  onCheckedValueChange?: ComponentEventHandler<RadioGroupItemProps>;\n\n  /** Initial checkedValue value. */\n  defaultCheckedValue?: number | string;\n\n  /** Shorthand array of props for RadioGroup. */\n  items?: ShorthandCollection<RadioGroupItemProps>;\n\n  /** A vertical radio group displays elements vertically. */\n  vertical?: boolean;\n}\n\nexport const radioGroupClassName = 'ui-radiogroup';\n\nexport type RadioGroupStylesProps = Required<Pick<RadioGroupProps, 'vertical'>>;\n\n/**\n * A RadioGroup allows user to select a value from a small set of mutually exclusive options.\n *\n * @accessibility\n * Implements [ARIA Radio Group](https://www.w3.org/TR/wai-aria-practices-1.1/#radiobutton) design pattern.\n * @accessibilityIssues\n * [JAWS narrates instruction message on each radio in radiogroup](https://github.com/FreedomScientific/VFO-standards-support/issues/473)\n */\nexport const RadioGroup = React.forwardRef<HTMLDivElement, RadioGroupProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(RadioGroup.displayName, context.telemetry);\n  setStart();\n\n  const { children, vertical, items, className, design, styles, variables } = props;\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(RadioGroup.handledProps, props);\n\n  const getA11yProps = useAccessibility<RadioGroupBehaviorProps>(props.accessibility, {\n    debugName: RadioGroup.displayName,\n    actionHandlers: {\n      nextItem: event => setCheckedItem(event, 1),\n      prevItem: event => setCheckedItem(event, -1),\n    },\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<RadioGroupStylesProps>(RadioGroup.displayName, {\n    className: radioGroupClassName,\n    mapPropsToStyles: () => ({\n      vertical,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const [checkedValue, setCheckedValue] = useAutoControlled({\n    defaultValue: props.defaultCheckedValue,\n    value: props.checkedValue,\n    initialValue: undefined,\n  });\n\n  const [shouldFocus, setShouldFocus] = React.useState(false);\n\n  const getItemProps = (item): RadioGroupItemProps => {\n    return (item as React.ReactElement<RadioGroupItemProps>).props || item;\n  };\n\n  const setCheckedItem = (event, direction) => {\n    const nextItem = findNextEnabledCheckedItem(direction);\n\n    if (nextItem) {\n      checkedValueChange({\n        nextCheckedValue: nextItem.value,\n        shouldFocus: true,\n        event,\n        itemProps: nextItem,\n      });\n    }\n    event.preventDefault();\n  };\n\n  const findNextEnabledCheckedItem = (direction): RadioGroupItemProps => {\n    if (!props.items || !props.items.length) {\n      return undefined;\n    }\n\n    const currentIndex =\n      // if none of the values selected, set current index to the first item\n      checkedValue !== undefined ? _.findIndex(props.items, item => getItemProps(item).value === checkedValue) : 0;\n\n    for (let newIndex = currentIndex + direction; newIndex !== currentIndex; newIndex += direction) {\n      if (newIndex < 0) {\n        newIndex = props.items.length - 1;\n      } else if (newIndex >= props.items.length) {\n        newIndex = 0;\n      }\n\n      if (newIndex === currentIndex) {\n        return undefined;\n      }\n\n      const itemProps = getItemProps(props.items[newIndex]);\n      if (!itemProps.disabled) {\n        return itemProps;\n      }\n    }\n    return undefined;\n  };\n\n  const handleItemOverrides = predefinedProps => ({\n    checked: typeof checkedValue !== 'undefined' && checkedValue === predefinedProps.value,\n    onClick: (event, itemProps) => {\n      const { value, disabled } = itemProps;\n      if (!disabled && value !== checkedValue) {\n        checkedValueChange({ nextCheckedValue: value, shouldFocus: false, event, itemProps });\n      }\n      _.invoke(predefinedProps, 'onClick', event, itemProps);\n    },\n    shouldFocus,\n  });\n\n  const renderItems = (vertical: boolean) => {\n    const isNoneValueSelected = checkedValue === undefined;\n    return _.map(items, (item, index) =>\n      RadioGroupItem.create(item, {\n        defaultProps: () =>\n          getA11yProps('item', {\n            vertical,\n            ...(index === 0 && isNoneValueSelected && { tabIndex: 0 }),\n          }),\n        overrideProps: handleItemOverrides,\n      }),\n    );\n  };\n\n  const checkedValueChange = ({\n    nextCheckedValue,\n    shouldFocus,\n    event,\n    itemProps,\n  }: {\n    nextCheckedValue: number | string;\n    shouldFocus: boolean;\n    event: React.SyntheticEvent;\n    itemProps: RadioGroupItemProps;\n  }) => {\n    setCheckedValue(nextCheckedValue);\n    setShouldFocus(shouldFocus);\n    _.invoke(props, 'onCheckedValueChange', event, itemProps);\n  };\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n      })}\n    >\n      {childrenExist(children) ? children : renderItems(vertical)}\n    </ElementType>,\n  );\n\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, RadioGroupProps> &\n  FluentComponentStaticProps<RadioGroupProps> & {\n    Item: typeof RadioGroupItem;\n  };\n\nRadioGroup.displayName = 'RadioGroup';\n\nRadioGroup.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  checkedValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  defaultCheckedValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  items: customPropTypes.collectionShorthand,\n  onCheckedValueChange: PropTypes.func,\n  vertical: PropTypes.bool,\n};\n\nRadioGroup.defaultProps = {\n  accessibility: radioGroupBehavior,\n};\n\nRadioGroup.handledProps = Object.keys(RadioGroup.propTypes) as any;\n\nRadioGroup.Item = RadioGroupItem;\n\nRadioGroup.create = createShorthandFactory({\n  Component: RadioGroup,\n});\n"],"mappings":"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"}