{"version":3,"file":"Loader.js","names":["loaderBehavior","customPropTypes","useTelemetry","useFluentContext","getElementType","useUnhandledProps","useStyles","useAccessibility","PropTypes","React","createShorthandFactory","commonPropTypes","getOrGenerateIdFromShorthand","Box","Text","loaderClassName","loaderSlotClassNames","indicator","label","Loader","forwardRef","props","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","delay","secondary","inline","labelPosition","className","design","styles","variables","size","ElementType","unhandledProps","handledProps","delayTimer","useRef","_React$useState","useState","visible","setVisible","labelId","current","_useStyles","mapPropsToStyles","mapPropsToInlineStyles","rtl","classes","resolvedStyles","getA11yProps","accessibility","debugName","mapPropsToBehavior","useEffect","setTimeout","clearTimeout","svgElement","createElement","viewBox","xmlns","svg","svgTrack","svgTail","element","Object","assign","root","create","defaultProps","children","id","propTypes","createCommon","content","number","itemShorthand","bool","oneOf","keys","Component","mappedProp","shorthandConfig"],"sources":["components/Loader/Loader.tsx"],"sourcesContent":["import { Accessibility, loaderBehavior, LoaderBehaviorProps } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport {\n  ShorthandConfig,\n  useTelemetry,\n  useFluentContext,\n  getElementType,\n  useUnhandledProps,\n  useStyles,\n  useAccessibility,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  createShorthandFactory,\n  UIComponentProps,\n  commonPropTypes,\n  SizeValue,\n  getOrGenerateIdFromShorthand,\n} from '../../utils';\nimport { ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Box, BoxProps } from '../Box/Box';\nimport { Text, TextProps } from '../Text/Text';\n\nexport interface LoaderSlotClassNames {\n  indicator: string;\n  label: string;\n}\n\nexport interface LoaderProps extends UIComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<LoaderBehaviorProps>;\n\n  /** Time in milliseconds after component mount before spinner is visible. */\n  delay?: number;\n\n  /** A loader can contain an indicator. */\n  indicator?: ShorthandValue<BoxProps>;\n\n  /** Loaders can appear inline with content. */\n  inline?: boolean;\n\n  /** A loader can contain a label. */\n  label?: ShorthandValue<TextProps>;\n\n  /** A label in the loader can have different positions. */\n  labelPosition?: 'above' | 'below' | 'start' | 'end';\n\n  /** A size of the loader. */\n  size?: SizeValue;\n\n  /** A loader can contain a custom svg element. */\n  svg?: ShorthandValue<BoxProps>;\n\n  /** A loader can be secondary */\n  secondary?: boolean;\n}\n\nexport interface LoaderState {\n  visible: boolean;\n  labelId: string;\n}\n\nexport const loaderClassName = 'ui-loader';\nexport const loaderSlotClassNames: LoaderSlotClassNames = {\n  indicator: `${loaderClassName}__indicator`,\n  label: `${loaderClassName}__label`,\n};\n\nexport type LoaderStylesProps = Pick<LoaderProps, 'inline' | 'labelPosition' | 'size' | 'secondary'>;\n\n/**\n * A loader alerts a user that content is being loaded or processed and they should wait for the activity to complete.\n *\n * @accessibility\n * Implements [ARIA progressbar](https://www.w3.org/TR/wai-aria-1.1/#progressbar) role.\n */\nexport const Loader = React.forwardRef<HTMLDivElement, LoaderProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Loader.displayName, context.telemetry);\n  setStart();\n  const { delay, secondary, label, indicator, inline, labelPosition, className, design, styles, variables, size } =\n    props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Loader.handledProps, props);\n\n  const delayTimer = React.useRef<number>();\n  const [visible, setVisible] = React.useState(props.delay === 0);\n\n  const labelId = React.useRef<string>();\n  labelId.current = getOrGenerateIdFromShorthand('loader-label-', label, labelId.current);\n\n  const { classes, styles: resolvedStyles } = useStyles<LoaderStylesProps>(Loader.displayName, {\n    className: loaderClassName,\n    mapPropsToStyles: () => ({\n      inline,\n      labelPosition,\n      size,\n      secondary,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const getA11yProps = useAccessibility<LoaderBehaviorProps>(props.accessibility, {\n    debugName: Loader.displayName,\n    mapPropsToBehavior: () => ({\n      labelId: labelId.current,\n    }),\n    rtl: context.rtl,\n  });\n\n  React.useEffect(() => {\n    if (delay > 0) {\n      // @ts-ignore We have a collision between types from DOM and @types/node\n      delayTimer.current = setTimeout(() => {\n        setVisible(true);\n      }, delay);\n    }\n\n    return () => clearTimeout(delayTimer.current);\n  }, [delay]);\n\n  const svgElement = (\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" className={classes.svg}>\n      <circle className={classes.svgTrack} />\n      <circle className={classes.svgTail} />\n    </svg>\n  );\n\n  const element = visible && (\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {Box.create(indicator, {\n        defaultProps: () =>\n          getA11yProps('indicator', {\n            children: svgElement,\n            className: loaderSlotClassNames.indicator,\n            styles: resolvedStyles.indicator,\n          }),\n      })}\n      {Text.create(label, {\n        defaultProps: () =>\n          getA11yProps('label', {\n            className: loaderSlotClassNames.label,\n            styles: resolvedStyles.label,\n            id: labelId.current,\n          }),\n      })}\n    </ElementType>\n  );\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, LoaderProps> &\n  FluentComponentStaticProps<LoaderProps> & {\n    shorthandConfig: ShorthandConfig<LoaderProps>;\n  };\n\nLoader.displayName = 'Loader';\n\nLoader.propTypes = {\n  ...commonPropTypes.createCommon({\n    children: false,\n    content: false,\n  }),\n  delay: PropTypes.number,\n  indicator: customPropTypes.itemShorthand,\n  inline: PropTypes.bool,\n  label: customPropTypes.itemShorthand,\n  labelPosition: PropTypes.oneOf(['above', 'below', 'start', 'end']),\n  size: customPropTypes.size,\n  svg: customPropTypes.itemShorthand,\n  secondary: PropTypes.bool,\n};\n\nLoader.defaultProps = {\n  accessibility: loaderBehavior,\n  delay: 0,\n  indicator: {},\n  labelPosition: 'below',\n  svg: '',\n  size: 'medium',\n};\n\nLoader.handledProps = Object.keys(Loader.propTypes) as any;\n\nLoader.create = createShorthandFactory({ Component: Loader, mappedProp: 'label' });\n\nLoader.shorthandConfig = { mappedProp: 'label' };\n"],"mappings":"AAAA,SAAwBA,cAAc,QAA6B,yBAAyB;AAC5F,OAAO,KAAKC,eAAe,MAAM,2BAA2B;AAC5D,SAEEC,YAAY,EACZC,gBAAgB,EAChBC,cAAc,EACdC,iBAAiB,EACjBC,SAAS,EACTC,gBAAgB,QAEX,0BAA0B;AACjC,OAAO,KAAKC,SAAS,MAAM,YAAY;AACvC,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SACEC,sBAAsB,EAEtBC,eAAe,EAEfC,4BAA4B,QACvB,aAAa;AAEpB,SAASC,GAAG,QAAkB,YAAY;AAC1C,SAASC,IAAI,QAAmB,cAAc;AAyC9C,OAAO,IAAMC,eAAe,GAAG,WAAW;AAC1C,OAAO,IAAMC,oBAA0C,GAAG;EACxDC,SAAS,EAAKF,eAAe,gBAAa;EAC1CG,KAAK,EAAKH,eAAe;AAC3B,CAAC;AAID;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMI,MAAM;EAAA,IAANA,MAAM,gBAAGV,KAAK,CAACW,UAAU,CAA8B,UAACC,KAAK,EAAEC,GAAG,EAAK;IAClF,IAAMC,OAAO,GAAGpB,gBAAgB,CAAC,CAAC;IAClC,IAAAqB,aAAA,GAA6BtB,YAAY,CAACiB,MAAM,CAACM,WAAW,EAAEF,OAAO,CAACG,SAAS,CAAC;MAAxEC,QAAQ,GAAAH,aAAA,CAARG,QAAQ;MAAEC,MAAM,GAAAJ,aAAA,CAANI,MAAM;IACxBD,QAAQ,CAAC,CAAC;IACV,IAAQE,KAAK,GACXR,KAAK,CADCQ,KAAK;MAAEC,SAAS,GACtBT,KAAK,CADQS,SAAS;MAAEZ,KAAK,GAC7BG,KAAK,CADmBH,KAAK;MAAED,SAAS,GACxCI,KAAK,CAD0BJ,SAAS;MAAEc,MAAM,GAChDV,KAAK,CADqCU,MAAM;MAAEC,aAAa,GAC/DX,KAAK,CAD6CW,aAAa;MAAEC,SAAS,GAC1EZ,KAAK,CAD4DY,SAAS;MAAEC,MAAM,GAClFb,KAAK,CADuEa,MAAM;MAAEC,MAAM,GAC1Fd,KAAK,CAD+Ec,MAAM;MAAEC,SAAS,GACrGf,KAAK,CADuFe,SAAS;MAAEC,IAAI,GAC3GhB,KAAK,CADkGgB,IAAI;IAG7G,IAAMC,WAAW,GAAGlC,cAAc,CAACiB,KAAK,CAAC;IACzC,IAAMkB,cAAc,GAAGlC,iBAAiB,CAACc,MAAM,CAACqB,YAAY,EAAEnB,KAAK,CAAC;IAEpE,IAAMoB,UAAU,GAAGhC,KAAK,CAACiC,MAAM,CAAS,CAAC;IACzC,IAAAC,eAAA,GAA8BlC,KAAK,CAACmC,QAAQ,CAACvB,KAAK,CAACQ,KAAK,KAAK,CAAC,CAAC;MAAxDgB,OAAO,GAAAF,eAAA;MAAEG,UAAU,GAAAH,eAAA;IAE1B,IAAMI,OAAO,GAAGtC,KAAK,CAACiC,MAAM,CAAS,CAAC;IACtCK,OAAO,CAACC,OAAO,GAAGpC,4BAA4B,CAAC,eAAe,EAAEM,KAAK,EAAE6B,OAAO,CAACC,OAAO,CAAC;IAEvF,IAAAC,UAAA,GAA4C3C,SAAS,CAAoBa,MAAM,CAACM,WAAW,EAAE;QAC3FQ,SAAS,EAAElB,eAAe;QAC1BmC,gBAAgB,EAAE,SAAAA,iBAAA;UAAA,OAAO;YACvBnB,MAAM,EAANA,MAAM;YACNC,aAAa,EAAbA,aAAa;YACbK,IAAI,EAAJA,IAAI;YACJP,SAAS,EAATA;UACF,CAAC;QAAA,CAAC;QACFqB,sBAAsB,EAAE,SAAAA,uBAAA;UAAA,OAAO;YAC7BlB,SAAS,EAATA,SAAS;YACTC,MAAM,EAANA,MAAM;YACNC,MAAM,EAANA,MAAM;YACNC,SAAS,EAATA;UACF,CAAC;QAAA,CAAC;QACFgB,GAAG,EAAE7B,OAAO,CAAC6B;MACf,CAAC,CAAC;MAfMC,OAAO,GAAAJ,UAAA,CAAPI,OAAO;MAAUC,cAAc,GAAAL,UAAA,CAAtBd,MAAM;IAiBvB,IAAMoB,YAAY,GAAGhD,gBAAgB,CAAsBc,KAAK,CAACmC,aAAa,EAAE;MAC9EC,SAAS,EAAEtC,MAAM,CAACM,WAAW;MAC7BiC,kBAAkB,EAAE,SAAAA,mBAAA;QAAA,OAAO;UACzBX,OAAO,EAAEA,OAAO,CAACC;QACnB,CAAC;MAAA,CAAC;MACFI,GAAG,EAAE7B,OAAO,CAAC6B;IACf,CAAC,CAAC;IAEF3C,KAAK,CAACkD,SAAS,CAAC,YAAM;MACpB,IAAI9B,KAAK,GAAG,CAAC,EAAE;QACb;QACAY,UAAU,CAACO,OAAO,GAAGY,UAAU,CAAC,YAAM;UACpCd,UAAU,CAAC,IAAI,CAAC;QAClB,CAAC,EAAEjB,KAAK,CAAC;MACX;MAEA,OAAO;QAAA,OAAMgC,YAAY,CAACpB,UAAU,CAACO,OAAO,CAAC;MAAA;IAC/C,CAAC,EAAE,CAACnB,KAAK,CAAC,CAAC;IAEX,IAAMiC,UAAU,gBACdrD,KAAA,CAAAsD,aAAA;MAAKC,OAAO,EAAC,aAAa;MAACC,KAAK,EAAC,4BAA4B;MAAChC,SAAS,EAAEoB,OAAO,CAACa;IAAI,gBACnFzD,KAAA,CAAAsD,aAAA;MAAQ9B,SAAS,EAAEoB,OAAO,CAACc;IAAS,CAAE,CAAC,eACvC1D,KAAA,CAAAsD,aAAA;MAAQ9B,SAAS,EAAEoB,OAAO,CAACe;IAAQ,CAAE,CAClC,CACN;IAED,IAAMC,OAAO,GAAGxB,OAAO,iBACrBpC,KAAA,CAAAsD,aAAA,CAACzB,WAAW,EACNiB,YAAY,CAAC,MAAM,EAAAe,MAAA,CAAAC,MAAA;MACrBtC,SAAS,EAAEoB,OAAO,CAACmB,IAAI;MACvBlD,GAAG,EAAHA;IAAG,GACAiB,cAAc,CAClB,CAAC,EAED1B,GAAG,CAAC4D,MAAM,CAACxD,SAAS,EAAE;MACrByD,YAAY,EAAE,SAAAA,aAAA;QAAA,OACZnB,YAAY,CAAC,WAAW,EAAE;UACxBoB,QAAQ,EAAEb,UAAU;UACpB7B,SAAS,EAAEjB,oBAAoB,CAACC,SAAS;UACzCkB,MAAM,EAAEmB,cAAc,CAACrC;QACzB,CAAC,CAAC;MAAA;IACN,CAAC,CAAC,EACDH,IAAI,CAAC2D,MAAM,CAACvD,KAAK,EAAE;MAClBwD,YAAY,EAAE,SAAAA,aAAA;QAAA,OACZnB,YAAY,CAAC,OAAO,EAAE;UACpBtB,SAAS,EAAEjB,oBAAoB,CAACE,KAAK;UACrCiB,MAAM,EAAEmB,cAAc,CAACpC,KAAK;UAC5B0D,EAAE,EAAE7B,OAAO,CAACC;QACd,CAAC,CAAC;MAAA;IACN,CAAC,CACU,CACd;IACDpB,MAAM,CAAC,CAAC;IACR,OAAOyC,OAAO;EAChB,CAAC,CAGE;EAEHlD,MAAM,CAACM,WAAW,GAAG,QAAQ;EAE7BN,MAAM,CAAC0D,SAAS,GAAAP,MAAA,CAAAC,MAAA,KACX5D,eAAe,CAACmE,YAAY,CAAC;IAC9BH,QAAQ,EAAE,KAAK;IACfI,OAAO,EAAE;EACX,CAAC,CAAC;IACFlD,KAAK,EAAErB,SAAS,CAACwE,MAAM;IACvB/D,SAAS,EAAEhB,eAAe,CAACgF,aAAa;IACxClD,MAAM,EAAEvB,SAAS,CAAC0E,IAAI;IACtBhE,KAAK,EAAEjB,eAAe,CAACgF,aAAa;IACpCjD,aAAa,EAAExB,SAAS,CAAC2E,KAAK,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IAClE9C,IAAI,EAAEpC,eAAe,CAACoC,IAAI;IAC1B6B,GAAG,EAAEjE,eAAe,CAACgF,aAAa;IAClCnD,SAAS,EAAEtB,SAAS,CAAC0E;EAAI,EAC1B;EAED/D,MAAM,CAACuD,YAAY,GAAG;IACpBlB,aAAa,EAAExD,cAAc;IAC7B6B,KAAK,EAAE,CAAC;IACRZ,SAAS,EAAE,CAAC,CAAC;IACbe,aAAa,EAAE,OAAO;IACtBkC,GAAG,EAAE,EAAE;IACP7B,IAAI,EAAE;EACR,CAAC;EAEDlB,MAAM,CAACqB,YAAY,GAAG8B,MAAM,CAACc,IAAI,CAACjE,MAAM,CAAC0D,SAAS,CAAQ;EAE1D1D,MAAM,CAACsD,MAAM,GAAG/D,sBAAsB,CAAC;IAAE2E,SAAS,EAAElE,MAAM;IAAEmE,UAAU,EAAE;EAAQ,CAAC,CAAC;EAElFnE,MAAM,CAACoE,eAAe,GAAG;IAAED,UAAU,EAAE;EAAQ,CAAC;EAAC,OA1HpCnE,MAAM;AAAA"}