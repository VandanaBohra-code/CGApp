{"version":3,"file":"MenuButton.js","names":["React","PropTypes","menuButtonBehavior","Ref","customPropTypes","commonPropTypes","getOrGenerateIdFromShorthand","createShorthandFactory","Popup","Menu","focusMenuItem","ALIGNMENTS","POSITIONS","AUTOSIZES","useAccessibility","useTelemetry","getElementType","useUnhandledProps","useFluentContext","useAutoControlled","useStyles","useOnIFrameFocus","menuButtonClassName","menuButtonSlotClassNames","menu","MenuButton","forwardRef","props","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","contextMenu","accessibility","align","className","defaultOpen","flipBoundary","mountNode","mouseLeaveDelay","offset","on","onOpenChange","overflowBoundary","pointing","popperRef","position","positionFixed","tabbableTrigger","target","trigger","unstable_disableTether","unstable_pinned","autoSize","variables","_useAutoControlled","defaultValue","value","open","initialValue","setOpen","e","__","_invoke","Object","assign","menuId","useRef","current","triggerId","triggerRef","menuRef","ElementType","unhandledProps","handledProps","getA11yProps","debugName","actionHandlers","closeMenu","_closeMenu","_x","apply","arguments","toString","openAndFocusFirst","openAndFocus","openAndFocusLast","mapPropsToBehavior","rtl","popupProps","_useStyles","mapPropsToInlineStyles","styles","classes","resolvedStyles","handleOpenChange","which","preventDefault","callback","handleMenuOverrides","predefinedProps","onItemClick","itemProps","onKeyDown","key","stopPropagation","content","create","defaultProps","vertical","overrideProps","unstable_behaviorDefinition","_ref","popupContent","createElement","innerRef","children","undefined","trapFocus","inline","autoFocus","popup","element","unstable_wrapWithFocusZone","root","propTypes","createCommon","oneOf","bool","domNode","number","oneOfType","func","arrayOf","object","onMenuItemClick","any","every","disallow","itemShorthandWithoutJSX","keys","Component","mappedProp"],"sources":["components/MenuButton/MenuButton.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport { Accessibility, menuButtonBehavior, MenuButtonBehaviorProps } from '@fluentui/accessibility';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\n\nimport { commonPropTypes, StyledComponentProps, getOrGenerateIdFromShorthand } from '../../utils';\nimport { ShorthandValue, ComponentEventHandler, ShorthandCollection, FluentComponentStaticProps } from '../../types';\n\nimport { createShorthandFactory } from '../../utils/factories';\nimport { Popup, PopupProps, PopupEvents, PopupEventsArray } from '../Popup/Popup';\nimport { Menu, MenuProps } from '../Menu/Menu';\nimport { MenuItemProps } from '../Menu/MenuItem';\nimport { focusMenuItem } from './focusUtils';\nimport { ALIGNMENTS, POSITIONS, PositioningProps, AutoSize, AUTOSIZES } from '../../utils/positioner';\nimport {\n  useAccessibility,\n  useTelemetry,\n  getElementType,\n  useUnhandledProps,\n  useFluentContext,\n  useAutoControlled,\n  useStyles,\n  useOnIFrameFocus,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\n\nexport interface MenuButtonSlotClassNames {\n  menu: string;\n}\n\nexport interface MenuButtonProps extends StyledComponentProps<MenuButtonProps>, PositioningProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * @default menuButtonBehavior\n   */\n  accessibility?: Accessibility<MenuButtonBehaviorProps>;\n\n  /** Additional CSS class name(s) to apply.  */\n  className?: string;\n\n  /** Initial value for 'open'. */\n  defaultOpen?: boolean;\n\n  /** Existing element the popup should be bound to. */\n  mountNode?: HTMLElement;\n\n  /** Delay in ms for the mouse leave event, before the popup will be closed. */\n  mouseLeaveDelay?: number;\n\n  /** Events triggering the popup. */\n  on?: PopupEvents | PopupEventsArray;\n\n  /** Defines whether popup is displayed. */\n  open?: boolean;\n\n  /**\n   * Called after user's click on a menu item.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onMenuItemClick?: ComponentEventHandler<MenuItemProps>;\n\n  /**\n   * Event for request to change 'open' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onOpenChange?: ComponentEventHandler<PopupProps>;\n\n  /** A popup can show a pointer to trigger. */\n  pointing?: boolean;\n\n  /**\n   * DOM element that should be used as popup's target - instead of 'trigger' element that is used by default.\n   */\n  target?: HTMLElement;\n\n  /** Element to be rendered in-place where the popup is defined. */\n  trigger?: JSX.Element;\n\n  /** Whether the trigger should be tabbable */\n  tabbableTrigger?: boolean;\n\n  /** Shorthand for menu configuration */\n  menu?: ShorthandValue<MenuProps> | ShorthandCollection<MenuItemProps>;\n\n  /** Determines if the MenuButton behaves as context menu */\n  contextMenu?: boolean;\n}\n\nexport interface MenuButtonState {\n  open: boolean;\n  menuId: string;\n  triggerId: string;\n}\n\nexport const menuButtonClassName = 'ui-menubutton';\nexport const menuButtonSlotClassNames: MenuButtonSlotClassNames = {\n  menu: `${menuButtonClassName}__menu`,\n};\n\nexport type MenuButtonStylesProps = never;\n\n/**\n * A MenuButton displays a menu connected to trigger element.\n * @accessibility\n */\nexport const MenuButton = React.forwardRef<HTMLDivElement, MenuButtonProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(MenuButton.displayName, context.telemetry);\n  setStart();\n\n  const {\n    // MenuButton props:\n    contextMenu,\n    menu,\n    // Popup props:\n    accessibility,\n    align,\n    className,\n    defaultOpen,\n    flipBoundary,\n    mountNode,\n    mouseLeaveDelay,\n    offset,\n    on,\n    onOpenChange,\n    overflowBoundary,\n    pointing,\n    popperRef,\n    position,\n    positionFixed,\n    tabbableTrigger,\n    target,\n    trigger,\n    unstable_disableTether,\n    unstable_pinned,\n    autoSize,\n    variables,\n  } = props;\n\n  const [open, setOpen] = useAutoControlled({\n    defaultValue: props.defaultOpen,\n    value: props.open,\n    initialValue: false,\n  });\n\n  useOnIFrameFocus(open, context.target, (e: Event) => {\n    setOpen(__ => {\n      _.invoke(props, 'onOpenChange', e, { ...props, ...{ open: false } });\n      return false;\n    });\n  });\n\n  const menuId = React.useRef<string>();\n  menuId.current = getOrGenerateIdFromShorthand('menubutton-menu-', menu, menuId.current);\n  const triggerId = React.useRef<string>();\n  triggerId.current = getOrGenerateIdFromShorthand('menubutton-trigger-', trigger, triggerId.current);\n\n  const triggerRef = React.useRef<HTMLElement>();\n  const menuRef = React.useRef<HTMLElement>();\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(MenuButton.handledProps, props);\n\n  const getA11yProps = useAccessibility<MenuButtonBehaviorProps>(accessibility, {\n    debugName: MenuButton.displayName,\n    actionHandlers: {\n      closeMenu: e => closeMenu(e),\n      openAndFocusFirst: e => openAndFocus(e, 'first'),\n      openAndFocusLast: e => openAndFocus(e, 'last'),\n    },\n    mapPropsToBehavior: () => ({\n      menuId: menuId.current,\n      triggerId: triggerId.current,\n      open,\n      trigger: props.trigger,\n      contextMenu,\n      on,\n      tabbableTrigger,\n    }),\n    rtl: context.rtl,\n  });\n\n  const popupProps: PopupProps = {\n    accessibility,\n    align,\n    defaultOpen,\n    mountNode,\n    mouseLeaveDelay,\n    flipBoundary,\n    offset,\n    on,\n    onOpenChange,\n    open,\n    overflowBoundary,\n    pointing,\n    popperRef,\n    position,\n    positionFixed,\n    tabbableTrigger,\n    target,\n    trigger,\n    unstable_disableTether,\n    unstable_pinned,\n    autoSize,\n  };\n\n  const { classes, styles: resolvedStyles } = useStyles<MenuButtonStylesProps>(MenuButton.displayName, {\n    className: menuButtonClassName,\n    mapPropsToInlineStyles: () => ({\n      className,\n      styles: props.styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const closeMenu = (e: React.KeyboardEvent) => {\n    handleOpenChange(e, false);\n  };\n\n  const openAndFocus = (e: React.KeyboardEvent, which: 'first' | 'last') => {\n    e.preventDefault();\n    handleOpenChange(e, true, () => menuRef.current && focusMenuItem(menuRef.current, which));\n  };\n\n  const handleOpenChange = (e: React.SyntheticEvent, open: boolean, callback?: () => void) => {\n    _.invoke(props, 'onOpenChange', e, { ...props, open });\n    setOpen(open);\n    callback && callback();\n  };\n\n  const handleMenuOverrides = (predefinedProps: MenuProps) => ({\n    onItemClick: (e: React.SyntheticEvent, itemProps: MenuItemProps) => {\n      _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n      _.invoke(props, 'onMenuItemClick', e, itemProps);\n      if (!itemProps || !itemProps.menu) {\n        // do not close if clicked on item with submenu\n        handleOpenChange(e, false);\n      }\n    },\n    onKeyDown: (e: React.KeyboardEvent, itemProps: MenuItemProps) => {\n      _.invoke(predefinedProps, 'onKeyDown', e, itemProps);\n      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        e.stopPropagation();\n      }\n    },\n  });\n\n  const content = Menu.create(menu, {\n    defaultProps: () =>\n      getA11yProps('menu', {\n        vertical: true,\n        className: menuButtonSlotClassNames.menu,\n      }),\n    overrideProps: handleMenuOverrides,\n  });\n\n  const overrideProps: PopupProps = {\n    accessibility: getA11yProps.unstable_behaviorDefinition,\n    open,\n    onOpenChange: (e, { open }) => {\n      handleOpenChange(e, open);\n    },\n    content: {\n      styles: resolvedStyles.popupContent,\n      content: content && <Ref innerRef={menuRef}>{content}</Ref>,\n    },\n    children: undefined, // force-reset `children` defined for `Popup` as it collides with the `trigger\n    ...(contextMenu\n      ? {\n          on: 'context',\n          trapFocus: true,\n          tabbableTrigger: false,\n        }\n      : {\n          inline: true,\n          autoFocus: true,\n        }),\n  };\n\n  const popup = Popup.create(popupProps, { overrideProps });\n\n  if (contextMenu) {\n    setEnd();\n    return popup;\n  }\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        ref,\n        className: classes.root,\n        ...unhandledProps,\n      })}\n    >\n      <Ref innerRef={triggerRef}>{popup}</Ref>\n    </ElementType>,\n  );\n  setEnd();\n  return element;\n}) as unknown as ForwardRefWithAs<'div', HTMLDivElement, MenuButtonProps> & FluentComponentStaticProps<MenuButtonProps>;\n\nMenuButton.displayName = 'MenuButton';\n\nMenuButton.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  align: PropTypes.oneOf(ALIGNMENTS),\n  defaultOpen: PropTypes.bool,\n  mountNode: customPropTypes.domNode,\n  mouseLeaveDelay: PropTypes.number,\n  offset: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.arrayOf(PropTypes.number) as PropTypes.Requireable<[number, number]>,\n  ]),\n  on: PropTypes.oneOfType([\n    PropTypes.oneOf(['hover', 'click', 'focus', 'context']),\n    PropTypes.arrayOf(PropTypes.oneOf(['click', 'focus', 'context'])),\n    PropTypes.arrayOf(PropTypes.oneOf(['hover', 'focus', 'context'])),\n  ]) as any,\n  flipBoundary: PropTypes.oneOfType([\n    PropTypes.object as PropTypes.Requireable<HTMLElement>,\n    PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n    PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n  ]),\n  overflowBoundary: PropTypes.oneOfType([\n    PropTypes.object as PropTypes.Requireable<HTMLElement>,\n    PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n    PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n  ]),\n  open: PropTypes.bool,\n  onMenuItemClick: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  popperRef: customPropTypes.ref,\n  position: PropTypes.oneOf(POSITIONS),\n  positionFixed: PropTypes.bool,\n  target: PropTypes.any,\n  trigger: customPropTypes.every([customPropTypes.disallow(['children']), PropTypes.any]),\n  tabbableTrigger: PropTypes.bool,\n  unstable_disableTether: PropTypes.oneOf([true, false, 'all']),\n  unstable_pinned: PropTypes.bool,\n  autoSize: PropTypes.oneOf<AutoSize>(AUTOSIZES),\n  menu: PropTypes.oneOfType([\n    customPropTypes.itemShorthandWithoutJSX,\n    PropTypes.arrayOf(customPropTypes.itemShorthandWithoutJSX),\n  ]),\n  contextMenu: PropTypes.bool,\n};\n\nMenuButton.defaultProps = {\n  accessibility: menuButtonBehavior,\n  align: 'start',\n  position: 'below',\n};\n\nMenuButton.handledProps = Object.keys(MenuButton.propTypes) as any;\n\nMenuButton.create = createShorthandFactory({ Component: MenuButton, mappedProp: 'menu' });\n"],"mappings":"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"}