{"version":3,"file":"ToolbarMenu.js","names":["toolbarMenuBehavior","toolbarMenuItemCheckboxBehavior","compose","getElementType","mergeVariablesOverrides","useUnhandledProps","useFluentContext","useAccessibility","useStyles","useTelemetry","Ref","customPropTypes","PropTypes","React","createShorthand","commonPropTypes","childrenExist","ToolbarMenuRadioGroup","ToolbarMenuDivider","ToolbarMenuItem","ToolbarVariablesContext","ToolbarVariablesProvider","toolbarMenuClassName","ToolbarMenu","props","ref","composeOptions","context","_useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","className","children","design","items","styles","variables","parentVariables","useContext","mergedVariables","slotProps","resolveSlotProps","getA11yProps","debugName","actionHandlers","performClick","e","_invoke","rtl","_useStyles","mapPropsToInlineStyles","unstable_props","classes","handleItemOverrides","predefinedProps","onClick","itemProps","Object","assign","menuOpen","menu","handleRadioGroupOverrides","onItemClick","renderItems","_map","item","kind","_get","slots","divider","defaultProps","group","overrideProps","toggle","ElementType","unhandledProps","handledProps","element","unstable_wrapWithFocusZone","createElement","root","value","innerRef","submenuIndicator","inSubmenu","submenu","shorthandConfig","mappedArrayProp","propTypes","createCommon","collectionShorthandWithKindProp","func","bool","shorthandAllowingChildren","as"],"sources":["components/Toolbar/ToolbarMenu.tsx"],"sourcesContent":["import {\n  Accessibility,\n  toolbarMenuBehavior,\n  toolbarMenuItemCheckboxBehavior,\n  ToolbarMenuBehaviorProps,\n} from '@fluentui/accessibility';\nimport {\n  compose,\n  getElementType,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useFluentContext,\n  useAccessibility,\n  useStyles,\n  useTelemetry,\n} from '@fluentui/react-bindings';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport {\n  createShorthand,\n  commonPropTypes,\n  childrenExist,\n  UIComponentProps,\n  ChildrenComponentProps,\n  ContentComponentProps,\n} from '../../utils';\n\nimport { ComponentEventHandler, ShorthandCollection, ShorthandValue } from '../../types';\n\nimport { ToolbarMenuRadioGroup, ToolbarMenuRadioGroupProps } from './ToolbarMenuRadioGroup';\nimport { ToolbarMenuDivider } from './ToolbarMenuDivider';\nimport { ToolbarMenuItem, ToolbarMenuItemProps } from './ToolbarMenuItem';\nimport { BoxProps } from '../Box/Box';\nimport { ToolbarVariablesContext, ToolbarVariablesProvider } from './toolbarVariablesContext';\nimport { ToolbarDividerProps } from './ToolbarDivider';\nimport { ToolbarItemProps } from './ToolbarItem';\n\nexport type ToolbarMenuItemShorthandKinds = {\n  divider: ToolbarDividerProps;\n  item: ToolbarItemProps;\n  toggle: ToolbarItemProps;\n};\n\nexport interface ToolbarMenuProps extends UIComponentProps, ChildrenComponentProps, ContentComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility<ToolbarMenuBehaviorProps>;\n\n  /** Shorthand array of props for ToolbarMenu. */\n  items?: ShorthandCollection<ToolbarMenuItemProps, ToolbarMenuItemShorthandKinds>;\n\n  /**\n   * Called on item click.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All item props.\n   */\n  onItemClick?: ComponentEventHandler<ToolbarMenuItemProps>;\n\n  /** Indicates whether the menu is submenu. */\n  submenu?: boolean;\n\n  /** Shorthand for the submenu indicator. */\n  submenuIndicator?: ShorthandValue<BoxProps>;\n}\n\nexport type ToolbarMenuStylesProps = never;\nexport const toolbarMenuClassName = 'ui-toolbar__menu';\n\n/**\n * A ToolbarMenu creates a pop-up menu attached to a ToolbarItem.\n *\n * @accessibility\n * Implements pop-up menu (submenu) behavior of [ARIA Menu](https://www.w3.org/TR/wai-aria-practices-1.1/#menu) design pattern.\n */\nexport const ToolbarMenu = compose<'ul', ToolbarMenuProps, ToolbarMenuStylesProps, {}, {}>(\n  (props, ref, composeOptions) => {\n    const context = useFluentContext();\n    const { setStart, setEnd } = useTelemetry(composeOptions.displayName, context.telemetry);\n    setStart();\n\n    const { accessibility, className, children, design, items, styles, variables } = props;\n\n    const parentVariables = React.useContext(ToolbarVariablesContext);\n    const mergedVariables = mergeVariablesOverrides(parentVariables, variables);\n    const slotProps = composeOptions.resolveSlotProps<ToolbarMenuProps>(props);\n\n    const getA11yProps = useAccessibility(accessibility, {\n      debugName: composeOptions.displayName,\n      actionHandlers: {\n        performClick: e => {\n          _.invoke(props, 'onClick', e, props);\n        },\n      },\n      rtl: context.rtl,\n    });\n    const { classes } = useStyles<ToolbarMenuStylesProps>(composeOptions.displayName, {\n      className: composeOptions.className,\n      composeOptions,\n      mapPropsToInlineStyles: () => ({\n        className,\n        design,\n        styles,\n        variables: mergedVariables,\n      }),\n      rtl: context.rtl,\n      unstable_props: props,\n    });\n\n    const handleItemOverrides = predefinedProps => ({\n      onClick: (e, itemProps) => {\n        _.invoke(predefinedProps, 'onClick', e, itemProps);\n        _.invoke(props, 'onItemClick', e, {\n          ...itemProps,\n          menuOpen: !!itemProps.menu,\n        });\n      },\n    });\n\n    const handleRadioGroupOverrides = (predefinedProps: ToolbarMenuRadioGroupProps) => ({\n      onItemClick: (e, itemProps) => {\n        _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n        _.invoke(props, 'onItemClick', e, itemProps);\n      },\n    });\n\n    const renderItems = () => {\n      return _.map(items, item => {\n        const kind = _.get(item, 'kind', 'item');\n\n        switch (kind) {\n          case 'divider':\n            return createShorthand(composeOptions.slots.divider, item, {\n              defaultProps: () => slotProps.divider,\n            });\n\n          case 'group':\n            return createShorthand(composeOptions.slots.group, item, {\n              defaultProps: () => slotProps.group,\n              overrideProps: handleRadioGroupOverrides,\n            });\n\n          case 'toggle':\n            return createShorthand(composeOptions.slots.toggle, item, {\n              defaultProps: () => slotProps.toggle,\n              overrideProps: handleItemOverrides,\n            });\n\n          default:\n            return createShorthand(composeOptions.slots.item, item, {\n              defaultProps: () => slotProps.item,\n              overrideProps: handleItemOverrides,\n            });\n        }\n      });\n    };\n\n    const ElementType = getElementType(props);\n    const unhandledProps = useUnhandledProps(composeOptions.handledProps, props);\n\n    const element = getA11yProps.unstable_wrapWithFocusZone(\n      <ElementType {...getA11yProps('root', { ...unhandledProps, className: classes.root })}>\n        <ToolbarVariablesProvider value={mergedVariables}>\n          {childrenExist(children) ? children : renderItems()}\n        </ToolbarVariablesProvider>\n      </ElementType>,\n    );\n    setEnd();\n\n    // TODO: As ElementType is wrapped with FocusZone which doesn't ref forwarding we have to use Ref\n    return ref ? <Ref innerRef={ref}>{element}</Ref> : element;\n  },\n  {\n    displayName: 'ToolbarMenu',\n    className: toolbarMenuClassName,\n\n    slots: {\n      item: ToolbarMenuItem,\n      divider: ToolbarMenuDivider,\n      group: ToolbarMenuRadioGroup,\n      toggle: ToolbarMenuItem,\n    },\n    slotProps: props => ({\n      item: {\n        submenuIndicator: props.submenuIndicator,\n        inSubmenu: props.submenu,\n      },\n      toggle: {\n        accessibility: toolbarMenuItemCheckboxBehavior,\n      },\n    }),\n\n    shorthandConfig: {\n      mappedArrayProp: 'items',\n    },\n    handledProps: [\n      'accessibility',\n      'as',\n      'children',\n      'className',\n      'content',\n      'design',\n      'items',\n      'onItemClick',\n      'styles',\n      'submenu',\n      'submenuIndicator',\n      'variables',\n    ],\n  },\n);\n\nToolbarMenu.propTypes = {\n  ...commonPropTypes.createCommon(),\n  items: customPropTypes.collectionShorthandWithKindProp(['divider', 'item']),\n  onItemClick: PropTypes.func,\n  submenu: PropTypes.bool,\n  submenuIndicator: customPropTypes.shorthandAllowingChildren,\n};\nToolbarMenu.defaultProps = {\n  accessibility: toolbarMenuBehavior,\n  as: 'ul',\n};\n"],"mappings":"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"}