{"version":3,"file":"ChatItem.js","names":["getElementType","useAccessibility","useFluentContext","useStyles","useTelemetry","useUnhandledProps","customPropTypes","PropTypes","React","childrenExist","commonPropTypes","createShorthandFactory","rtlTextContainer","Box","useChatContextSelectors","ChatItemContextProvider","chatItemClassName","chatItemSlotClassNames","message","gutter","ChatItem","forwardRef","inputProps","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","chatProps","density","v","accessibility","behaviors","item","props","Object","assign","attached","children","className","contentPosition","design","styles","variables","_props$unstable_layou","unstable_layout","layout","getA11Props","debugName","rtl","_useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","renderContent","gutterElement","create","defaultProps","messageElement","createElement","value","ElementType","unhandledProps","handledProps","element","root","getAttributes","forElements","as","propTypes","createCommon","content","oneOfType","bool","oneOf","itemShorthand","keys","Component","mappedProp"],"sources":["components/Chat/ChatItem.tsx"],"sourcesContent":["import { Accessibility } from '@fluentui/accessibility';\nimport {\n  ForwardRefWithAs,\n  getElementType,\n  useAccessibility,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { FluentComponentStaticProps, ShorthandValue } from '../../types';\nimport {\n  ChildrenComponentProps,\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  rtlTextContainer,\n  UIComponentProps,\n} from '../../utils';\nimport { Box, BoxProps } from '../Box/Box';\nimport { useChatContextSelectors } from './chatContext';\nimport { ChatDensity } from './chatDensity';\nimport { ChatItemContextProvider } from './chatItemContext';\nimport type { ChatMessageLayout } from './ChatMessage';\n\nexport interface ChatItemSlotClassNames {\n  message: string;\n  gutter: string;\n}\n\nexport const chatItemClassName = 'ui-chat__item';\nexport const chatItemSlotClassNames: ChatItemSlotClassNames = {\n  message: `${chatItemClassName}__message`,\n  gutter: `${chatItemClassName}__gutter`,\n};\n\nexport interface ChatItemProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<never>;\n\n  /** Controls item's relation to other chat items. */\n  attached?: boolean | 'top' | 'bottom';\n\n  /** Indicates whether the content is positioned at the start or the end. */\n  contentPosition?: 'start' | 'end';\n\n  /** Chat density. Is automatically set by the Chat. */\n  density?: ChatDensity;\n\n  /** Chat items can have a gutter. */\n  gutter?: ShorthandValue<BoxProps>;\n\n  /** Chat items can have a message. */\n  message?: ShorthandValue<BoxProps>;\n\n  /** Chat items can render with different layouts. */\n  unstable_layout?: ChatMessageLayout;\n}\n\nexport type ChatItemStylesProps = Pick<ChatItemProps, 'attached' | 'contentPosition' | 'density'> & {\n  layout: ChatMessageLayout;\n};\n\n/**\n * A ChatItem is container for single entity in Chat (e.g. message, notification, etc).\n */\nexport const ChatItem = React.forwardRef<HTMLLIElement, ChatItemProps>((inputProps, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(ChatItem.displayName, context.telemetry);\n  setStart();\n\n  const chatProps = useChatContextSelectors({\n    density: v => v.density,\n    accessibility: v => v.behaviors.item,\n  });\n  const props = {\n    ...chatProps,\n    ...inputProps,\n  };\n\n  const {\n    accessibility,\n    attached,\n    children,\n    className,\n    contentPosition,\n    density,\n    design,\n    gutter,\n    message,\n    styles,\n    variables,\n    unstable_layout: layout = 'default',\n  } = props;\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: ChatItem.displayName,\n    rtl: context.rtl,\n  });\n  const { classes, styles: resolvedStyles } = useStyles<ChatItemStylesProps>(ChatItem.displayName, {\n    className: chatItemClassName,\n    mapPropsToStyles: () => ({\n      layout,\n      attached,\n      contentPosition,\n      density,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const renderContent = () => {\n    const gutterElement = Box.create(gutter, {\n      defaultProps: () =>\n        getA11Props('gutter', {\n          className: chatItemSlotClassNames.gutter,\n          styles: resolvedStyles.gutter,\n        }),\n    });\n    const messageElement = Box.create(message, {\n      defaultProps: () =>\n        getA11Props('message', {\n          className: chatItemSlotClassNames.message,\n          styles: resolvedStyles.message,\n        }),\n    });\n\n    return (\n      <ChatItemContextProvider value={{ attached }}>\n        {(contentPosition === 'start' || density === 'compact') && gutterElement}\n        {messageElement}\n        {contentPosition === 'end' && density === 'comfy' && gutterElement}\n      </ChatItemContextProvider>\n    );\n  };\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(ChatItem.handledProps, props);\n\n  const element = (\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      {childrenExist(children) ? children : renderContent()}\n    </ElementType>\n  );\n  setEnd();\n\n  return element;\n}) as unknown as ForwardRefWithAs<'li', HTMLLIElement, ChatItemProps> & FluentComponentStaticProps<ChatItemProps>;\n\nChatItem.displayName = 'ChatItem';\n\nChatItem.defaultProps = {\n  as: 'li',\n  contentPosition: 'start',\n  attached: false,\n};\nChatItem.propTypes = {\n  ...commonPropTypes.createCommon({ content: false }),\n  attached: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf<'top' | 'bottom'>(['top', 'bottom'])]),\n  contentPosition: PropTypes.oneOf(['start', 'end']),\n  density: PropTypes.oneOf<ChatDensity>(['comfy', 'compact']),\n  gutter: customPropTypes.itemShorthand,\n  message: customPropTypes.itemShorthand,\n  unstable_layout: PropTypes.oneOf(['default', 'refresh']),\n};\nChatItem.handledProps = Object.keys(ChatItem.propTypes) as any;\n\nChatItem.create = createShorthandFactory({ Component: ChatItem, mappedProp: 'message' });\n"],"mappings":"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"}