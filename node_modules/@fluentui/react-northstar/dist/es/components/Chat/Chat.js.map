{"version":3,"file":"Chat.js","names":["chatBehavior","getElementType","useAccessibility","useFluentContext","useStyles","useTelemetry","useUnhandledProps","customPropTypes","PropTypes","React","childrenExist","commonPropTypes","createShorthandFactory","rtlTextContainer","ChatContextProvider","defaultChatDensity","ChatItem","ChatMessage","ChatMessageDetails","ChatMessageHeader","ChatMessageReadStatus","chatClassName","chatSlotClassNames","item","Chat","forwardRef","props","ref","context","_useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","children","className","density","design","items","styles","variables","getA11Props","debugName","rtl","_useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","ElementType","unhandledProps","handledProps","childBehaviors","contextProps","behaviors","message","element","unstable_wrapWithFocusZone","createElement","Object","assign","root","getAttributes","forElements","value","_map","create","defaultProps","as","propTypes","createCommon","content","arrayOf","itemShorthand","oneOf","keys","Item","Message","MessageHeader","MessageDetails","MessageReadStatus","Component"],"sources":["components/Chat/Chat.tsx"],"sourcesContent":["import { Accessibility, chatBehavior, ChatBehaviorProps } from '@fluentui/accessibility';\nimport {\n  ForwardRefWithAs,\n  getElementType,\n  useAccessibility,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { FluentComponentStaticProps, ShorthandCollection } from '../../types';\nimport {\n  ChildrenComponentProps,\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  rtlTextContainer,\n  UIComponentProps,\n} from '../../utils';\nimport { ChatContextProvider, ChatContextValue } from './chatContext';\nimport { ChatDensity, defaultChatDensity } from './chatDensity';\nimport { ChatItem, ChatItemProps } from './ChatItem';\nimport { ChatMessage } from './ChatMessage';\nimport { ChatMessageDetails } from './ChatMessageDetails';\nimport { ChatMessageHeader } from './ChatMessageHeader';\nimport { ChatMessageReadStatus } from './ChatMessageReadStatus';\n\nexport interface ChatSlotClassNames {\n  item: string;\n}\n\nexport interface ChatProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ChatBehaviorProps>;\n\n  /** Chat density. */\n  density?: ChatDensity;\n\n  /** Shorthand array of the items inside the chat. */\n  items?: ShorthandCollection<ChatItemProps>;\n}\n\nexport type ChatStylesProps = Pick<ChatProps, 'density'>;\nexport const chatClassName = 'ui-chat';\nexport const chatSlotClassNames: ChatSlotClassNames = {\n  item: `${chatClassName}__item`,\n};\n\n/**\n * A Chat displays messages from a conversation between multiple users.\n */\nexport const Chat = React.forwardRef<HTMLUListElement, ChatProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Chat.displayName, context.telemetry);\n  setStart();\n\n  const { accessibility, children, className, density, design, items, styles, variables } = props;\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: Chat.displayName,\n    rtl: context.rtl,\n  });\n  const { classes } = useStyles<ChatStylesProps>(Chat.displayName, {\n    className: chatClassName,\n    mapPropsToStyles: () => ({ density }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Chat.handledProps, props);\n\n  const childBehaviors = accessibility && (accessibility as Accessibility<ChatProps>)(props).childBehaviors;\n\n  const contextProps: ChatContextValue = {\n    density,\n    behaviors: {\n      item: childBehaviors?.item,\n      message: childBehaviors?.message,\n    },\n  };\n\n  const element = getA11Props.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      <ChatContextProvider value={contextProps}>\n        {childrenExist(children)\n          ? children\n          : _.map(items, item =>\n              ChatItem.create(item, {\n                defaultProps: () => ({ className: chatSlotClassNames.item }),\n              }),\n            )}\n      </ChatContextProvider>\n    </ElementType>,\n  );\n  setEnd();\n\n  return element;\n}) as unknown as ForwardRefWithAs<'ul', HTMLUListElement, ChatProps> &\n  FluentComponentStaticProps<ChatProps> & {\n    Item: typeof ChatItem;\n    Message: typeof ChatMessage;\n    MessageDetails: typeof ChatMessageDetails;\n    MessageReadStatus: typeof ChatMessageReadStatus;\n    MessageHeader: typeof ChatMessageHeader;\n  };\n\nChat.displayName = 'Chat';\n\nChat.defaultProps = {\n  accessibility: chatBehavior,\n  as: 'ul',\n  density: defaultChatDensity,\n};\nChat.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  items: PropTypes.arrayOf(customPropTypes.itemShorthand),\n  density: PropTypes.oneOf<ChatDensity>(['comfy', 'compact']),\n};\nChat.handledProps = Object.keys(Chat.propTypes) as any;\n\nChat.Item = ChatItem;\nChat.Message = ChatMessage;\nChat.MessageHeader = ChatMessageHeader;\nChat.MessageDetails = ChatMessageDetails;\nChat.MessageReadStatus = ChatMessageReadStatus;\n\nChat.create = createShorthandFactory({ Component: Chat });\n"],"mappings":"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"}